<!doctype html><html lang=en-us><head><meta charset=UTF-8><meta content="IE=edge,chrome=1" http-equiv=X-UA-Compatible><meta content="width=device-width,minimum-scale=1" name=viewport><title>Sergio Carracedo | Dealing with infinite pagination</title>
<meta content="yes" name=mobile-web-app-capable><meta content="black-translucent" name=apple-mobile-web-app-status-bar-style><meta content="Sergio Carracedo's personal page and blog" name=description><meta content="Sergio Carracedo" name=author><link href=https://sergiocarracedo.es//index.xml rel=alternate title="Sergio Carracedo" type=application/rss+xml><link href=/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link href=/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link href=/site.webmanifest rel=manifest><link color=#5bbad5 href=/safari-pinned-tab.svg rel=mask-icon><meta content="#da532c" name=msapplication-TileColor><meta content="#ffffff" name=theme-color><link crossorigin href="https://fonts.googleapis.com/css2?family=Rozha+One:wght@400;500;600;700&display=swap" rel=preconnect><link crossorigin href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;500;600;700&display=swap" rel=preconnect><link crossorigin href="https://fonts.googleapis.com/css2?family=Allura:wght@400;500;600;700&display=swap" rel=preconnect><meta property="og:title" content="Dealing with infinite pagination"><meta property="og:description" content="In the software development context, pagination is the process of dividing a list of items (rows) into groups of the same size.
For example if we have these items:
const items = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16]
and we want to paginate in pages (groups) of 5 elements we should know the list or the total items in the list, and we can calculate the number of pages, and how to get the items on a page (I&rsquo;m assuming that the page value starts in 0)"><meta property="og:type" content="article"><meta property="og:url" content="https://sergiocarracedo.es/dealing-with-infinite-pagination/"><meta property="og:image" content="https://sergiocarracedo.es/dealing-with-infinite-pagination/infinite-pagination-GVYRkT5f1tA-unsplash_hu15160211674690187459.jpg"><meta name=twitter:image content="https://sergiocarracedo.es/dealing-with-infinite-pagination/infinite-pagination-GVYRkT5f1tA-unsplash_hu15160211674690187459.jpg"></meta><meta property="article:section" content="blog">
<meta property="article:published_time" content="2021-11-22T00:00:00+00:00"><meta property="article:modified_time" content="2021-11-22T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"></meta>
<link href=https://sergiocarracedo.es/dealing-with-infinite-pagination/ rel=canonical><link href=https://sergiocarracedo.es/scss/main.min.c6aeadd0f64f9e58a5f36b759b3c5f69f04adcbaf95c581a64fdd28dfd1410e8.css integrity="sha256-xq6t0PZPnlil82t1mzxfafBK3Lr5XFgaZP3Sjf0UEOg=" rel="stylesheet preconnect"><link as=style href=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css rel="stylesheet preload" type=text/css></head><body><header class="web-header background-paper-secondary"><h2><a class=back-to-home href=/ title="Back to home"><i class="fas fa-home"></i><div class=back-to-home__content><span class=back-to-home__action>Back to home</span><div class=back-to-home__title><img alt="Sergio Carracedo" class=avatar src=/i/sergiocarracedo_hu15161314200389136556.jpg width=100 height=100><h4>Sergio Carracedo</h4></div></div></a></h2><div class=web-header__page-title><span>Dealing with infinite pagination</span></div><div class=theme-switch><i class="theme-switch__theme fas fa-sun" id=theme-switch-light title="Switch to light theme"></i>
<i class="theme-switch__theme fas fa-moon" id=theme-switch-dark title="Switch to dark theme"></i></div></header><div class=main-content><article class="post post--single"><div class="post__main wrapper-1200"><aside class=post__metadata><time class=post__date datetime=2021-11-22><i class="far fa-calendar-alt"></i> Nov 22, 2021
</time><a href=https://sergiocarracedo.es/tags/frontend class=post__tag><span>frontend</span>
</a><span class=post__reading-time><i class="far fa-clock"></i> 4 minutes read</span></aside><header class=post__header><h1 class=post__title>Dealing with infinite pagination</h1></header><figure class=post__cover><img alt="Dealing with infinite pagination" height=400 src=/dealing-with-infinite-pagination/infinite-pagination-GVYRkT5f1tA-unsplash_hu12452990372748670716.jpg width=1200></figure><div class=post__content><p>In the software development context, pagination is the process of dividing a list of items (rows) into groups of the same size.</p><p>For example if we have these items:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>items</span> <span style=color:#f92672>=</span> [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>11</span>, <span style=color:#ae81ff>12</span>, <span style=color:#ae81ff>13</span>, <span style=color:#ae81ff>14</span>, <span style=color:#ae81ff>15</span>, <span style=color:#ae81ff>16</span>]
</span></span></code></pre></div><p>and we want to paginate in pages (groups) of 5 elements we should know the list or the total items in the list, and we can calculate the number of pages, and how to get the items on a page (I&rsquo;m assuming that the page value starts in 0)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>itemsPerPage</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>items</span> <span style=color:#f92672>=</span> [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>6</span>, <span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>11</span>, <span style=color:#ae81ff>12</span>, <span style=color:#ae81ff>13</span>, <span style=color:#ae81ff>14</span>, <span style=color:#ae81ff>15</span>, <span style=color:#ae81ff>16</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>pages</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>ceil</span>(<span style=color:#a6e22e>items</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>itemsPerPage</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>getPageItems</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>items</span>, <span style=color:#a6e22e>page</span>, <span style=color:#a6e22e>itemsPerPage</span>) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>items</span>.<span style=color:#a6e22e>slice</span>(<span style=color:#a6e22e>page</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>itemsPerPage</span>, <span style=color:#a6e22e>itemsPerPage</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>This is the ideal situation where the list of items is known, and we are working only on frontend or backend.</p><p>The common situation is when your frontend shows the items and the paginator, and you get the data from an API. In this case, you will do a request like <code>https://example.com/list-items/?page=1</code> or better using <code>offset</code> and <code>limit</code> instead of <code>page</code> for more flexibility: <code>https://example.com/list-items/offset=0&amp;limit=5</code></p><p>In this situation to render the paginator, we must know the total number of items or pages, that is why the response of the server should be something similar to:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;pagination&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;totalItems&#34;</span>: <span style=color:#ae81ff>16</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;items&#34;</span>: [<span style=color:#960050;background-color:#1e0010>...</span>]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Then, after loading the first page we will get the total items in the server, and we can calculate the number of pages and render the paginator.</p><p>If our database table from where we get the items is big, the operation of counting the total number of events can be very expensive.</p><h1 id=pagination-without-knowing-the-total-count-of-items-aka-infinite-pagination>Pagination without knowing the total count of items (a.k.a. Infinite pagination)</h1><p>The concept is very similar to the <em>infinite scrolling</em>, where the user does scroll and when the scroll is in the last item, your component loads a few items more, and so on.</p><p>The different thing is we must show a paginator. How we should show the paginator?</p><p>As we don&rsquo;t know the total number of pages we have some questions to answer:</p><ul><li>How many pages we must show in the paginator?</li><li>What is the last page?</li></ul><h2 id=the-algorithm>The algorithm</h2><p>This algorithm will help us to know how many pages we must show and how to know the last page</p><p>In our paginator component we must have two variables:</p><ul><li><code>page</code> is the current page</li><li><code>pages</code> is the total number of pages</li><li><code>lastPage</code> is the last confirmed page (default value <code>Number.POSITIVE_INFINITY</code>)</li></ul><p><code>pages</code> is a dynamic value, the initial value is <code>1</code></p><ol><li>Load the first page using the <code>offset</code> and <code>limit</code> params. <code>offset</code> will be 0 (it&rsquo;s the first page), and limit will be, let&rsquo;s say 10</li><li>If the count of loaded items is less than the <code>limit</code> in this case 10, then we know this is the last page</li><li>If not, if the count is 10, we increment the value of <code>pages</code> by 1, then our component must render a new page button.</li></ol><p>There is a special case: What happens if the last page has 10 items?
In that case when the user tries to go to this page, when we will load it we will get an empty list of items, then, we must set the value of <code>lastPage</code> to the last page with items and use <code>lastPage</code> to only render this number of pages.</p><p>With this simple algorithm we can create an infinite paginator, and obviously, it has some disadvantages:</p><ul><li>The user only can navigate the pages in order (Can&rsquo;t go to page 10 from page 1 without pass through the page 2,3,4,5&mldr;)</li><li>If we have the case of 10 items (<code>limit</code> = page items) in the last page, is strange for the user to go back to the last page and remove the next button</li></ul><p>Despite these disadvantages is a good solution if our backend doesn&rsquo;t let us know the total number of pages.</p></div></div><aside class=post__nav-wrapper><div class=wrapper-1200><div class="post-nav post-nav--prev"><a class=post-nav__link href="https://sergiocarracedo.es/running-workflows-in-you-k8s-cluster-argo-workflows/?ref=footer"><div class="post-nav__cover btn btn--img btn--hover-parent"><img alt=.Next.Title src=/running-workflows-in-you-k8s-cluster-argo-workflows/cover_hu15505246237445986256.jpg width=200 height=120></div><div class=post-nav__title>Running workflows in you k8s cluster: Argo...</div></a></div><div class=blog-link><a class="btn btn--outlined" href=https://sergiocarracedo.es/blog>All Blog posts</a></div><div class="post-nav post-nav--next"><a class=post-nav__link href="https://sergiocarracedo.es/integration-tests-in-golang-with-dockertest/?ref=footer"><div class="post-nav__cover btn btn--img btn--hover-parent"><img alt=.Prev.Title class=post-nav__cover src=/integration-tests-in-golang-with-dockertest/dockertest-pexels-miguel-3785927_hu3198692226417318529.jpg width=200 height=120></div><div class=post-nav__title>Integration tests in Golang with dockertest</div></a></div></div><div class="wrapper-1200 post__nav-years"><ul class=years><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2024>2024</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2023>2023</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2022>2022</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2021>2021</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2020>2020</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2019>2019</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2018>2018</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2017>2017</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2016>2016</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2015>2015</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2013>2013</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2012>2012</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2011>2011</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2010>2010</a></li></ul></div></aside><aside class=post__search-wrapper><div class=wrapper-1200>Search in <strong>145</strong> blog posts:<form action=https://sergiocarracedo.es/search class="search-form search-form--dark search-form--l" method=get><label for=search-input hidden>Search</label>
<input class=search-form__input id=search-input name=query placeholder=Search type=text>
<button aria-label="Search in the blog" class=search-form__button>
<i class="fas fa-search"></i></button></form></div></aside><aside class=post__comments><div class=wrapper-1200><div id=disqus_thread>To show comments is mandatory to accept cookie policy.</div></div></aside></article></div><footer class="web-footer background-paper-secondary"><div class=wrapper-1200><div class=web-footer__left><div class=me><div class=me__avatar><img alt="Sergio Carracedo" height=180 src=/i/sergiocarracedo_hu3613990337080381956.jpg width=180></div><div class=me__titles><h1>Sergio Carracedo</h1><h2>Senior Fullstack developer.</h2><h3>Always learning, cats, good conversations and small details lover.</h3></div></div></div><div class=web-footer__right><nav class=menu><ul role=menu><li class=menu__item role=presentation><a role=menuitem href=https://sergiocarracedo.es/>Home</a></li><li class=menu__item role=presentation><a role=menuitem href=https://sergiocarracedo.es/blog>Blog</a></li><li class=menu__item role=presentation><a role=menuitem href=https://sergiocarracedo.es/index.xml>RSS Feed</a></li></ul></nav><div class=social><a class=social__link href=http://www.linkedin.com/in/sergiocarracedo target=_blank title=LinkedIn style=animation-delay:2s><i class="fab fa-linkedin"></i>
</a><a class=social__link href=mailto:hi+blog@sergiocarracedo.es target=_blank title=Email style=animation-delay:1.9333333333333333s><i class="fas fa-envelope"></i>
</a><a class=social__link href=https://github.com/sergiocarracedo target=_blank title=GitHub style=animation-delay:1.8666666666666667s><i class="fab fa-github"></i>
</a><a class=social__link href=https://bsky.app/profile/sergiocarracedo.es target=_blank title=Bluesky style=animation-delay:1.8s><svg fill="none" viewBox="0 0 64 57"><path fill="currentcolor" d="M13.873 3.805C21.21 9.332 29.103 20.537 32 26.55v15.882c0-.338-.13.044-.41.867-1.512 4.456-7.418 21.847-20.923 7.944-7.111-7.32-3.819-14.64 9.125-16.85-7.405 1.264-15.73-.825-18.014-9.015C1.12 23.022.0 8.51.0 6.55.0-3.268 8.579-.182 13.873 3.805zm36.254.0C42.79 9.332 34.897 20.537 32 26.55v15.882c0-.338.13.044.41.867 1.512 4.456 7.418 21.847 20.923 7.944 7.111-7.32 3.819-14.64-9.125-16.85 7.405 1.264 15.73-.825 18.014-9.015C62.88 23.022 64 8.51 64 6.55c0-9.818-8.578-6.732-13.873-2.745z"/></svg>
</a><a class=social__link href=https://www.drupal.org/u/sergiocarracedo target=_blank title=Drupal style=animation-delay:1.7333333333333334s><i class="fab fa-drupal"></i>
</a><a class=social__link href=https://www.npmjs.com/~sergiocarracedo target=_blank title=Npm style=animation-delay:1.6666666666666667s><svg viewBox="0 0 780 250" aria-hidden="true"><path fill="currentcolor" d="M240 250h1e2v-50h1e2V0H240V250zM340 50h50v1e2h-50V50zM480 0v2e2h1e2V50h50v150h50V50h50v150h50V0H480zM0 2e2h1e2V50h50v150h50V0H0V2e2z" stroke-width="5" stroke="currentcolor"/></svg>
</a><a class=social__link href=https://www.twitter.com/sergiocarracedo target=_blank title=Twitter style=animation-delay:1.6s><i class="fab fa-twitter"></i>
</a><a class=social__link href=http://www.last.fm/user/gasman40 target=_blank title=Last.fm style=animation-delay:1.5333333333333332s><i class="fab fa-lastfm"></i>
</a><a class=social__link href=http://sergiocarracedo.tumblr.com/ target=_blank title=Tumblr style=animation-delay:1.4666666666666668s><i class="fab fa-tumblr"></i></a></div></div></div></footer><script async src="https://www.googletagmanager.com/gtag/js?id=G-87X78TXEGE"></script><script>function runGA(){window.dataLayer=window.dataLayer||[];function e(){dataLayer.push(arguments)}e("js",new Date),e("config","G-87X78TXEGE")}</script><script>function runDisqus(){(function(){var e=document,t=e.createElement("script");t.src="https://sergiocarracedo.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()}</script><script src=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js></script><script>window.addEventListener("load",function(){window.cookieconsent.initialise({palette:{popup:{background:"#004262",text:"#fff"},button:{background:"#8ec760",text:"#ffffff"}},type:"opt-out",content:{message:"Este sitio usa cookies propias y de terceros para mejorar la experiencia de usuario y esas cosas.",allow:"Ok, continua",deny:"Nada de cookies",link:"Saber más",href:"https://sergiocarracedo.es/cookies"},onStatusChange:function(e){e=="allow"&&runCookiesAllowed()},onInitialise:function(e){e=="allow"&&runCookiesAllowed()}})})</script><script>addEventListener("scroll",e=>{let t=document.getElementsByTagName("body")[0];t&&window.scrollY>10?t.classList.add("not-in-top"):t.classList.remove("not-in-top")});function runCookiesAllowed(){runGA(),runDisqus()}</script><script integrity="sha256-hyPros3hoBf0jJM1+zayQLFFkchXwy4d/k2QMvk0sHs=" src=https://sergiocarracedo.es/js/theme.min.8723eba2cde1a017f48c9335fb36b240b14591c857c32e1dfe4d9032f934b07b.js></script><script src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js type=text/javascript></script><script integrity="sha256-9aiKKMxF0IhB2gmJbfgVOjk8GCtKW7zP2MwD74dPfDo=" src=https://sergiocarracedo.es/js/search.min.f5a88a28cc45d08841da09896df8153a393c182b4a5bbccfd8cc03ef874f7c3a.js></script></body></html>