<!doctype html><html><head><meta charset=utf-8><meta content="IE=edge,chrome=1" http-equiv=x-ua-compatible><meta content="width=device-width,minimum-scale=1" name=viewport><title>Sergio Carracedo | Vuex el Redux de Vue.js (I)</title><meta content="yes" name=apple-mobile-web-app-capable><meta content="black-translucent" name=apple-mobile-web-app-status-bar-style><meta content="Sergio Carracedo's personal page and blog" name=description><meta content="Sergio Carracedo" name=author><link href=favicon.png rel=icon><meta property="og:title" content="Vuex el Redux de Vue.js (I)"><meta property="og:description" content="Vuex se define a si mismo como una librería de control del patrón de estado. Veremos lo que implica este patrón, pero antes veamos los conceptos básicos:
Estado (state) El estado es un objeto plano, este contiene los valores que definen tu aplicación en un momento dado. Es la única fuente de verdad, es decir, es el único lugar donde consultar estos valores. Aclarar que el estado es el conjunto de valores que usa la aplicación para reaccionar como lo hace en un momento determinado, por ejemplo, si estamos mostrando una lista de posts de blog, esta lista es parte del estado, la página que estamos viendo es otra parte del estado."><meta property="og:type" content="article"><meta property="og:url" content="/2017/04/03/vuex-el-redux-de-vuejs-i/"><meta property="og:image" content="/2017/04/03/vuex-el-redux-de-vuejs-i/pexels-photo-99541_0_hue3e183c5fa902cd4ae789f3e908b1fee_133862_1920x1080_fill_q75_box_center.jpeg"><meta name=twitter:image content="/2017/04/03/vuex-el-redux-de-vuejs-i/pexels-photo-99541_0_hue3e183c5fa902cd4ae789f3e908b1fee_133862_1920x1080_fill_q75_box_center.jpeg"></meta><meta property="article:section" content="blog"><meta property="article:published_time" content="2017-04-03T00:00:00+00:00"><meta property="article:modified_time" content="2017-04-03T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"></meta><link href=/scss/main.b828673a3d5cfef040954da3fd3125b451a3b0f99f67071dde0523e725015ceb.css integrity="sha256-uChnOj1c/vBAlU2j/TEltFGjsPmfZwcd3gUj5yUBXOs=" rel=stylesheet><link href=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css rel=stylesheet type=text/css></head><body><header class=web-header><h2><a class=back-to-home href=/ title="Back to home"><i class="fas fa-home"></i><div class=back-to-home__content><span class=back-to-home__action>Back to home</span><div class=back-to-home__title><img alt="Sergio Carracedo" class=avatar src=/i/sergiocarracedo_hu73b47473f776de3df6b6aad72862b165_186188_100x100_fit_q75_box.jpg><h4>Sergio Carracedo</h4></div></div></a></h2><div class=web-header__page-title>Vuex el Redux de Vue.js (I)</div><div class=theme-switch><i class="theme-switch__theme fas fa-sun" id=theme-switch-light title="Switch to light theme"></i>
<i class="theme-switch__theme fas fa-moon" id=theme-switch-dark title="Switch to dark theme"></i></div></header><div class=main-content><article class="post post--single"><div class="post__main wrapper-1200"><aside class=post__metadata><time class=post__date datetime=2017-04-03><i class="far fa-calendar-alt"></i> Apr 3, 2017</time><div class=post__tags></div><span class=post__reading-time><i class="far fa-clock"></i> 3 minutes read</span></aside><header class=post__header><h1 class=post__title>Vuex el Redux de Vue.js (I)</h1></header><figure class=post__cover><img src=/2017/04/03/vuex-el-redux-de-vuejs-i/pexels-photo-99541_0_hue3e183c5fa902cd4ae789f3e908b1fee_133862_1200x400_fill_q75_box_center.jpeg alt="Vuex el Redux de Vue.js (I)" width=1200 height=400></figure><div class=post__content><p><a href=https://vuex.vuejs.org/en/><strong>Vuex</strong></a> se define a si mismo como una <em>librería de control del patrón de estado.</em> Veremos lo que implica este patrón, pero antes veamos los conceptos básicos:</p><h3 id=estado-state>Estado (state)</h3><p>El estado es un objeto plano, este contiene los valores que definen tu aplicación en un momento dado. Es la <strong>única fuente de verdad</strong>, es decir, es el único lugar donde consultar estos valores. Aclarar que el estado es el conjunto de valores que usa la aplicación para reaccionar como lo hace en un momento determinado, por ejemplo, si estamos mostrando una lista de <em>posts de blog</em>, esta lista es parte del estado, la página que estamos viendo es otra parte del estado. </p><pre tabindex=0><code>const state = {
    counter: 0,
    blog: {
        posts: []
        currentPage: 0
    }
}
</code></pre><p>El paradigma subyacente de este patrón es que, en una SPA (<em>Single page application</em>) los componentes acceden y manipulan datos que son usados en otros componentes y que cualquier cambio en un valor debe trasladarse de forma sencilla a todos los componentes que lo necesitan, por ello el <strong>estado debe ser la única fuente de verdad</strong>.</p><p>Además, hay una estricta regla que debe cumplirse: <strong>los componentes no pueden modificar el valor de estado directamente.</strong> Para garantizar que un cambio de estado se traslada a todos los componentes, cualquier cambio se debe hacer mediante <em>mutations</em>, que explico un poco más abajo en este mismo post.</p><h3 id=getters>Getters</h3><p>En ocasiones necesitamos manipular el resultado de un estado, por ejemplo, paginar los resultados o filtrar por título, normalmente esto lo realizaríamos en el componente, pero si queremos reusar esa función podemos usar los <em>getters</em>, que no son más que datos derivados el estado actual.</p><pre tabindex=0><code>getters: {
  postsActive: state =&gt; {
    return state.blog.posts.filter(post =&gt; post.active)
  }
}
</code></pre><h3 id=mutaciones--mutations>Mutaciones / Mutations</h3><p>Como deciamos, la única forma de alterar el estado es usando mutaciones, que son algo parecido a lanzar un evento. Cada mutación tiene un <strong>tipo (type)</strong> y un <strong>manejador (handler).</strong></p><p>El_handler_ es una función que recibe como primer argumento el estado actual, y puede recibir opcionalmente un <em>payload</em> como segundo parametro.</p><pre tabindex=0><code>mutations: {
	nextPage (state) {
	  	// mutate state
	  	state.blog.currentPage++
	},
	prevPage (state, payload) {
		state.blog.currentPage = state.blog.currentPage - payload.pages
	}
}
</code></pre><p>Un <em>mutation</em> nunca debe ser llamado directamente, la forma de hacerlo es usar <strong>store.commit(&lsquo;mutation type&rsquo;)</strong>, por ejemplo:</p><pre tabindex=0><code>store.commit(&#39;nextPage&#39;)
</code></pre><p>Las mutaciones siguen las reglas de reactividad de <strong>vue.js</strong>, esto es muy importante, por que cuando el valor del estado sea alterado mediante mutaciones, cualquier componente que esté observando el estado, recibirá el nuevo valor.</p><p>Algo que debemos tener en cuenta y que es MUY IMPORTANTE, **las mutaciones deben ser síncronas. **Supongamos que tenemos un <em>mutation</em> que al ser lanzado hace una llamada asíncrona para actualizar los post del blog y otro que simplemente elimina uno de la lista. Al ser el primero asíncrono no podemos garantizar el orden real en el que se alterará el estado.</p><p>Esto lo veremos en detalle en el siguente post y la forma en la que resolver la necesidad de hacer llamadas asíncronas.</p></div></div><aside class=post__nav-wrapper><div class=wrapper-1200><div class="post-nav post-nav--prev"><a class=post-nav__link href="/2017/04/06/vuex-el-redux-de-vuejs-ii/?ref=footer"><div class=post-nav__cover><img alt=.NextPage.Title src=/2017/04/06/vuex-el-redux-de-vuejs-ii/pexels-photo-99541_1_hue3e183c5fa902cd4ae789f3e908b1fee_41779_200x120_fill_q75_box_center.jpeg></div><div class=post-nav__title>Vuex el Redux de Vue.js (II)</div></a></div><div class=blog-link><a class=btn href=blog>All Blog posts</a></div><div class="post-nav post-nav--next"><a class=post-nav__link href="/2017/03/15/introduccion-vuejs/?ref=footer"><div class=post-nav__cover><img alt=.PrevPage.Title class=post-nav__cover src=/2017/03/15/introduccion-vuejs/pexels-photo-196160_hucc9370dd5a2fecb6b12ae8170d908851_547707_200x120_fill_q75_box_center.jpeg></div><div class=post-nav__title>Introducción a Vue.js</div></a></div></div></aside><aside class=post__comments><div class=wrapper-1200><div id=disqus_thread>To show the comments is mandatory accept cookie policy.</div></div></aside></article></div><footer class=web-footer><div class=wrapper-1200><div class=web-footer__left><div class=me><div class=me__avatar><img alt="Sergio Carracedo" src=/i/sergiocarracedo_hu73b47473f776de3df6b6aad72862b165_186188_170x170_fit_q75_box.jpg></div><div class=me__titles><h1>Sergio Carracedo</h1><h2>Senior Fullstack developer.</h2><h3>Formula 1, cats, good conversations and small details lover.</h3></div></div></div><div class=web-footer__right><nav role=main class=menu><ul><li class=menu__item><a href>Home</a></li><li class=menu__item><a href=blog>Blog</a></li></ul></nav><div class=social><a class=social__link href=http://www.linkedin.com/in/sergiocarracedo target=_blank title=LinkedIn style=animation-delay:2s><i class="fab fa-linkedin"></i></a>
<a class=social__link href=mailto:hi+blog@sergiocarracedo.es target=_blank title=Email style=animation-delay:1.9333333333333333s><i class="fas fa-envelope"></i></a>
<a class=social__link href=https://github.com/sergiocarracedo target=_blank title=GitHub style=animation-delay:1.8666666666666667s><i class="fab fa-github"></i></a>
<a class=social__link href=https://www.drupal.org/u/sergiocarracedo target=_blank title=Drupal style=animation-delay:1.8s><i class="fab fa-drupal"></i></a>
<a class=social__link href=https://www.twitter.com/sergiocarracedo target=_blank title=Twitter style=animation-delay:1.7333333333333334s><i class="fab fa-twitter"></i></a>
<a class=social__link href=http://www.last.fm/user/gasman40 target=_blank title=Last.fm style=animation-delay:1.6666666666666667s><i class="fab fa-lastfm"></i></a>
<a class=social__link href=http://sergiocarracedo.tumblr.com/ target=_blank title=Tumblr style=animation-delay:1.6s><i class="fab fa-tumblr"></i></a></div></div></div></footer><script async src="https://www.googletagmanager.com/gtag/js?id=UA-133459072-1"></script>
<script>function runGA(){window.dataLayer=window.dataLayer||[];function e(){dataLayer.push(arguments)}e("js",new Date),e("config","UA-133459072-1")}</script><script>function runDisqus(){(function(){var e=document,t=e.createElement("script");t.src="https://sergiocarracedo.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()}</script><script src=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js></script>
<script>window.addEventListener("load",function(){window.cookieconsent.initialise({palette:{popup:{background:"#004262",text:"#fff"},button:{background:"#8ec760",text:"#ffffff"}},type:"opt-out",content:{message:"Este sitio usa cookies propias y de terceros para mejorar la experiencia de usuario y esas cosas.",allow:"Ok, continua",deny:"Nada de cookies",link:"Saber más",href:"cookies"},onStatusChange:function(e){e=="allow"&&runCookiesAllowed()},onInitialise:function(e){e=="allow"&&runCookiesAllowed()}})})</script><script>addEventListener("scroll",e=>{let t=document.getElementsByTagName("body")[0];t&&window.scrollY>10?t.classList.add("not-in-top"):t.classList.remove("not-in-top")});function runCookiesAllowed(){runGA(),runDisqus()}</script><script integrity="sha256-6W09eoRhk1Og2XFEl4eaBSED33MOr8P1V5qaL3z+PEY=" src=/js/theme.e96d3d7a84619353a0d9714497879a052103df730eafc3f5579a9a2f7cfe3c46.js></script></body></html>