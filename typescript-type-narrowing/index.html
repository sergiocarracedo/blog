<!doctype html><html><head><meta charset=UTF-8><meta content="IE=edge,chrome=1" http-equiv=X-UA-Compatible><meta content="width=device-width,minimum-scale=1" name=viewport><title>Sergio Carracedo | Typescript type narrowing, type guards and type predicates ([var] is [type])</title>
<meta content="yes" name=apple-mobile-web-app-capable><meta content="black-translucent" name=apple-mobile-web-app-status-bar-style><meta content="Sergio Carracedo's personal page and blog" name=description><meta content="Sergio Carracedo" name=author><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><meta property="og:title" content="Typescript type narrowing, type guards and  type predicates ([var] is [type])"><meta property="og:description" content="One useful feature in Typescript is union types, for example string | number | null, it&rsquo;s a way to specify an argument, return, or variable that can get values with different types.
Type Narrowing is a technique that allows Typescript compiler to reduce the types of a value evaluating guard clauses in compilation time.
Let&rsquo;s see a simple example, imagine we have a function to uppercase a value that can be number, string, or just null, into the function we need to handle the different cases, but at the same time Typescript can understand the types and reduce value type to the correct type in each code&rsquo;s branch."><meta property="og:type" content="article"><meta property="og:url" content="https://sergiocarracedo.es/typescript-type-narrowing/"><meta property="og:image" content="https://sergiocarracedo.es/typescript-type-narrowing/jakob-braun-HTGrBFwlYLA-unsplash_hu10487548068517023859.jpg"><meta name=twitter:image content="https://sergiocarracedo.es/typescript-type-narrowing/jakob-braun-HTGrBFwlYLA-unsplash_hu10487548068517023859.jpg"></meta><meta property="article:section" content="blog">
<meta property="article:published_time" content="2022-11-15T00:00:00+00:00"><meta property="article:modified_time" content="2022-11-15T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"></meta>
<link rel=canonical href=https://sergiocarracedo.es/typescript-type-narrowing/><link href=https://sergiocarracedo.es/scss/main.1559a03561830d7de305f4c9f989ccda247f022d321e21b0e121c745373917ff.css integrity="sha256-FVmgNWGDDX3jBfTJ+YnM2iR/Ai0yHiGw4SHHRTc5F/8=" rel=stylesheet><link href=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css rel=stylesheet type=text/css></head><body><header class="web-header background-paper-secondary"><h2><a class=back-to-home href=/ title="Back to home"><i class="fas fa-home"></i><div class=back-to-home__content><span class=back-to-home__action>Back to home</span><div class=back-to-home__title><img alt="Sergio Carracedo" class=avatar src=/i/sergiocarracedo_hu15161314200389136556.jpg><h4>Sergio Carracedo</h4></div></div></a></h2><div class=web-header__page-title><span>Typescript type narrowing, type guards and type predicates ([var] is [type])</span></div><div class=theme-switch><i class="theme-switch__theme fas fa-sun" id=theme-switch-light title="Switch to light theme"></i>
<i class="theme-switch__theme fas fa-moon" id=theme-switch-dark title="Switch to dark theme"></i></div></header><div class=main-content><article class="post post--single"><div class="post__main wrapper-1200"><aside class=post__metadata><time class=post__date datetime=2022-11-15><i class="far fa-calendar-alt"></i> Nov 15, 2022
</time><a href=https://sergiocarracedo.es/tags/typescript class=post__tag><span>typescript</span>
</a><a href=https://sergiocarracedo.es/tags/js class=post__tag><span>js</span>
</a><span class=post__reading-time><i class="far fa-clock"></i> 5 minutes read</span></aside><header class=post__header><h1 class=post__title>Typescript type narrowing, type guards and type predicates ([var] is [type])</h1></header><figure class=post__cover><img src=/typescript-type-narrowing/jakob-braun-HTGrBFwlYLA-unsplash_hu8633561907019881323.jpg alt="Typescript type narrowing, type guards and  type predicates ([var] is [type])" width=1200 height=400></figure><div class=post__content><p>One useful feature in Typescript is <em>union types</em>, for example <code>string | number | null</code>, it&rsquo;s a way to specify an argument, return, or variable that can get values with different types.</p><p><strong>Type Narrowing</strong> is a technique that allows Typescript compiler to <strong>reduce</strong> the types of a value evaluating <strong>guard clauses</strong> in compilation time.</p><p>Let&rsquo;s see a simple example, imagine we have a function to uppercase a value that can be <code>number</code>, <code>string</code>, or just <code>null</code>, into the function we need to handle the different cases, but at the same time Typescript can understand the types and reduce value type to the correct type in each code&rsquo;s branch.</p><pre tabindex=0><code>function uppercase(value: string | number | null ): string { // Here value&#39;s type is string | number | null
  if (value === null) {
    console.log(value) // Here value&#39;s type is null
    return &#34;&#34;
  }

  if (typeof value === &#39;number&#39;) {
    // Here value&#39;s type is number
    value = value.toString() 
  }
  // Here we can be sure the value&#39;s type is string
  return value.toUpperCase()
}
</code></pre><p>You can check it by yourself by hovering <code>value</code> across the code in the <a href="https://www.typescriptlang.org/play?ssl=13&ssc=1&pln=1&pc=1#code/GYVwdgxgLglg9mABCADigpgJwgQwM7oAUAbjgDYjoBcieUmMYA5ogD6JggC2ARlmxxBkyiAJQ06DZogDeAKESIYwRCXKVEAXm2Dho2QsWIICPHDLoAdGThM1FdKMOLM6KCExIARF8MBfOUNlVSgATww4FVIHLR0Ack5eLDj9eSNEaI1NDPUrKDgAZXpGOydFAMNXd08ch0t8gFU0LABhfCJ9OQCgA">Typescript&rsquo;s playground</a></p><p>Note type narrowing is not to reduce the types to just one type, in our example line 2 (<code>if (value === null)</code>) makes sure the value is <code>null</code>, but a guard like <code>if (value)</code> only removes the possibility of being <code>null</code>, so after this guard <code>value</code>&rsquo;s type is <code>number | string</code></p><h1 id=why-type-narrowing>Why type narrowing</h1><p>When a value can have multiple possible types (union type), it&rsquo;s important to handle the values in the correct way to avoid runtime errors, a simple function like the example,:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>uppercase</span>(<span style=color:#a6e22e>value</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>value</span>.<span style=color:#a6e22e>toUpperCase</span>() 
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>is completely valid in vanilla Javascript, but can fail on runtime if the value is a number or null.
Using Typescript gives you the possibility of writing better code as it &ldquo;forces&rdquo; you to write code to handle the case for each type and that is when do type narrowing.</p><h1 id=type-guards>Type guards</h1><p>As I mentioned, type guards are a way of doing type narrowing setting a condition that the typescript compiler can evaluate and unequivocally reduce the types the variable can be.</p><p>It&rsquo;s important to note the type guards are relative to typings in compilation time, not in the run time, so, not all the guards you can think are valid as type guard, remember, <strong>the value must be able to be inferred on compilation time, not by the value in runtime</strong>.</p><p>There are a lot of different type guards: <code>typeof</code>, <code>instanceof</code>, <code>in</code> operator, <strong>type predicates</strong>, discriminated unions, equality operator, etc&mldr;</p><p>I don&rsquo;t want to go deep into all the types, the <a href=https://www.typescriptlang.org/docs/handbook/2/narrowing.html>official Typescript documentation</a> is very good, and not too much to add, but anyway I want to focus and provide more info about type predicates that has an interesting syntax and is not very common, but useful.</p><h2 id=type-predicates>Type predicates</h2><p>In some cases, the logic to do type narrowing can be a bit complex (more than a simple <code>typeof</code> or a discriminated union) and it will be nice to extract the type narrowing logic, let&rsquo;s see an example, imagine we have this interfaces</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Shape</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;square&#39;</span> <span style=color:#f92672>|</span> <span style=color:#e6db74>&#39;ellipse&#39;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Circle</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Shape</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;ellipse&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>radius</span>: <span style=color:#66d9ef>number</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Ellipse</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Shape</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;ellipse&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>radius1</span>: <span style=color:#66d9ef>number</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>radius2</span>: <span style=color:#66d9ef>number</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Square</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Shape</span>  {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;square&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>side</span>: <span style=color:#66d9ef>number</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>and a function to calculate the area depending on the shape</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>area</span>(<span style=color:#a6e22e>shape</span>: <span style=color:#66d9ef>Circle</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>Square</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>Ellipse</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>number</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>shape</span>.<span style=color:#66d9ef>type</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;square&#39;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// shape&#39;s type is Square
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>shape</span>.<span style=color:#a6e22e>side</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span> 
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>shape</span>.<span style=color:#66d9ef>type</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;ellipse&#39;</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>!</span>(<span style=color:#e6db74>&#39;radius2&#39;</span> <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>shape</span>)) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// shape&#39;s type is Circle
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>shape</span>.<span style=color:#a6e22e>radius</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>shape</span>.<span style=color:#a6e22e>radius</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>PI</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// shape&#39;s type is Ellipse
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>shape</span>.<span style=color:#a6e22e>radius1</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>shape</span>.<span style=color:#a6e22e>radius2</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>PI</span> 
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>This works perfectly, the code, the type narrowing, etc. Now imagine you want to extract the logic on knowing if the shape is a circle, just move the logic to a function</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>isCircle</span>(<span style=color:#a6e22e>shape</span>: <span style=color:#66d9ef>Shape</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>boolean</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>shape</span>.<span style=color:#66d9ef>type</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;ellipse&#39;</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>!</span>(<span style=color:#e6db74>&#39;radius2&#39;</span> <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>shape</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>And now this is the function after the refactor</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>area</span>(<span style=color:#a6e22e>shape</span>: <span style=color:#66d9ef>Circle</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>Square</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>Ellipse</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>number</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>shape</span>.<span style=color:#66d9ef>type</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;square&#39;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// shape&#39;s type is type is Square
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>shape</span>.<span style=color:#a6e22e>side</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>isCircle</span>(<span style=color:#a6e22e>shape</span>)) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// shape&#39;s type is Circle | Ellipse
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>shape</span>.<span style=color:#a6e22e>radius</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>shape</span>.<span style=color:#a6e22e>radius</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>PI</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// shape&#39;s type is Circle | Ellipse
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>shape</span>.<span style=color:#a6e22e>radius1</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>shape</span>.<span style=color:#a6e22e>radius2</span> <span style=color:#f92672>*</span> Math.<span style=color:#a6e22e>PI</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Note that now the type after the function <code>isCircle</code> is still being <code>Circle | Ellipse</code>, so the narrowing is not working, but why?.
<strong>The narrowing is not working</strong> as the <code>isCircle</code> returns <code>boolean</code> and the <strong>compiler it&rsquo;s not smart enough to know the semantic meaning of this boolean</strong>, this is why we need a <strong>type predicate</strong></p><p>Just changing a bit the function&rsquo;s return type we can achieve our goal:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>isCircle</span>(<span style=color:#a6e22e>shape</span>: <span style=color:#66d9ef>Shape</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>shape</span> <span style=color:#66d9ef>is</span> <span style=color:#a6e22e>Circle</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>shape</span>.<span style=color:#66d9ef>type</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;ellipse&#39;</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>!</span>(<span style=color:#e6db74>&#39;radius2&#39;</span> <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>shape</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><code>[argument] is [type]</code> return type still being a boolean but now has a meaning and lets Typescript compiler know if an argument is of the specified type.</p><blockquote><p>At this point I want to let you know that the typescript compiler is not perfect, and while I was writing this post I found a bug in the type narrowing: if <code>Circle</code> and <code>Ellipse</code> share the attribute <code>radius</code> the compiler still inferring <code>Circle | Ellipse</code> on the <code>isCircle</code> function.</p></blockquote><h2 id=summarizing>Summarizing</h2><p>The benefits of type narrowing are just the benefits of using Typescript, strong typing, and more control over the values, but it&rsquo;s good to know more about how the compiler works to have a better understanding of the language.</p></div></div><aside class=post__nav-wrapper><div class=wrapper-1200><div class="post-nav post-nav--prev"><a class=post-nav__link href="https://sergiocarracedo.es/using-charts-frontend-echarts-with-examples/?ref=footer"><div class="post-nav__cover btn btn--img btn--hover-parent"><img alt=.Next.Title src=/using-charts-frontend-echarts-with-examples/pexels-lukas-590022_hu9180285403492163514.jpg></div><div class=post-nav__title>Using charts in the frontend: Echarts with...</div></a></div><div class=blog-link><a class="btn btn--outlined" href=https://sergiocarracedo.es/blog>All Blog posts</a></div><div class="post-nav post-nav--next"><a class=post-nav__link href="https://sergiocarracedo.es/negative-feedback-from-engineers-to-managers/?ref=footer"><div class="post-nav__cover btn btn--img btn--hover-parent"><img alt=.Prev.Title class=post-nav__cover src=/negative-feedback-from-engineers-to-managers/jon-tyson-82ZEOTntP8g-unsplash_hu16690634313561487905.jpg></div><div class=post-nav__title>Giving (Negative) Feedback From Engineers to...</div></a></div></div></aside><aside class=post__search-wrapper><div class=wrapper-1200>Search in this blog:<form class="search-form search-form--dark search-form--l" action=https://sergiocarracedo.es/search method=get><label hidden for=search-input>Search</label>
<input type=text id=search-input name=query placeholder=Search class=search-form__input>
<button class=search-form__button>
<i class="fas fa-search"></i></button></form></div></aside><aside class=post__comments><div class=wrapper-1200><div id=disqus_thread>To show the comments is mandatory accept cookie policy.</div></div></aside></article></div><footer class="web-footer background-paper-secondary"><div class=wrapper-1200><div class=web-footer__left><div class=me><div class=me__avatar><img alt="Sergio Carracedo" src=/i/sergiocarracedo_hu3613990337080381956.jpg></div><div class=me__titles><h1>Sergio Carracedo</h1><h2>Senior Fullstack developer.</h2><h3>Always learning, cats, good conversations and small details lover.</h3></div></div></div><div class=web-footer__right><nav role=main class=menu><ul><li class=menu__item><a href=https://sergiocarracedo.es/>Home</a></li><li class=menu__item><a href=https://sergiocarracedo.es/blog>Blog</a></li></ul></nav><div class=social><a class=social__link href=http://www.linkedin.com/in/sergiocarracedo target=_blank title=LinkedIn style=animation-delay:2s><i class="fab fa-linkedin"></i>
</a><a class=social__link href=mailto:hi+blog@sergiocarracedo.es target=_blank title=Email style=animation-delay:1.9333333333333333s><i class="fas fa-envelope"></i>
</a><a class=social__link href=https://github.com/sergiocarracedo target=_blank title=GitHub style=animation-delay:1.8666666666666667s><i class="fab fa-github"></i>
</a><a class=social__link href=https://www.drupal.org/u/sergiocarracedo target=_blank title=Drupal style=animation-delay:1.8s><i class="fab fa-drupal"></i>
</a><a class=social__link href=https://www.twitter.com/sergiocarracedo target=_blank title=Twitter style=animation-delay:1.7333333333333334s><i class="fab fa-twitter"></i>
</a><a class=social__link href=http://www.last.fm/user/gasman40 target=_blank title=Last.fm style=animation-delay:1.6666666666666667s><i class="fab fa-lastfm"></i>
</a><a class=social__link href=http://sergiocarracedo.tumblr.com/ target=_blank title=Tumblr style=animation-delay:1.6s><i class="fab fa-tumblr"></i></a></div></div></div></footer><script async src="https://www.googletagmanager.com/gtag/js?id=G-87X78TXEGE"></script><script>function runGA(){window.dataLayer=window.dataLayer||[];function e(){dataLayer.push(arguments)}e("js",new Date),e("config","G-87X78TXEGE")}</script><script>function runDisqus(){(function(){var e=document,t=e.createElement("script");t.src="https://sergiocarracedo.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()}</script><script src=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js></script><script>window.addEventListener("load",function(){window.cookieconsent.initialise({palette:{popup:{background:"#004262",text:"#fff"},button:{background:"#8ec760",text:"#ffffff"}},type:"opt-out",content:{message:"Este sitio usa cookies propias y de terceros para mejorar la experiencia de usuario y esas cosas.",allow:"Ok, continua",deny:"Nada de cookies",link:"Saber más",href:"https://sergiocarracedo.es/cookies"},onStatusChange:function(e){e=="allow"&&runCookiesAllowed()},onInitialise:function(e){e=="allow"&&runCookiesAllowed()}})})</script><script>addEventListener("scroll",e=>{let t=document.getElementsByTagName("body")[0];t&&window.scrollY>10?t.classList.add("not-in-top"):t.classList.remove("not-in-top")});function runCookiesAllowed(){runGA(),runDisqus()}</script><script integrity="sha256-iiQa3rTjie3Ydsr4WEu2+aLDTaxKKVR3ZTwTYrRUjXs=" src=https://sergiocarracedo.es/js/theme.8a241adeb4e389edd876caf8584bb6f9a2c34dac4a295477653c1362b4548d7b.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js></script><script integrity="sha256-LVPRt2Ca+MpOY1KztdII4jRv+U0kJBcBZEvwhZr2a4Y=" src=https://sergiocarracedo.es/js/search.2d53d1b7609af8ca4e6352b3b5d208e2346ff94d24241701644bf0859af66b86.js></script></body></html>