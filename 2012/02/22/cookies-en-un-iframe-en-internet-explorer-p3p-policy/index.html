<!doctype html><html><head><meta charset=utf-8><meta content="IE=edge,chrome=1" http-equiv=x-ua-compatible><meta content="width=device-width,minimum-scale=1" name=viewport><title>Sergio Carracedo | Cookies en un IFRAME en Internet Explorer: p3p policy</title><meta content="yes" name=apple-mobile-web-app-capable><meta content="black-translucent" name=apple-mobile-web-app-status-bar-style><meta content="Sergio Carracedo's personal page and blog" name=description><meta content="Sergio Carracedo" name=author><link href=/favicon.png rel=icon><meta property="og:title" content="Cookies en un IFRAME en Internet Explorer: p3p policy"><meta property="og:description" content="Si desarrollas una aplicación PHP web que trabaja dentro de un IFRAME lo más probable es que necesite usar una sesión y para almacenar el id de la sesión necesitarás una cookie (de esto se encarga el propio PHP) pero deberás tener en cuenta algunas consideraciones para evitarte problemas de funcionamiento en Internet Explorer 6+
IE considera que el contenido del IFRAME es &ldquo;contenido de terceras partes&rdquo; y siguiendo la configuración por defecto de seguridad del navegador bloqueará las cookies del IFRAME y por lo tanto perderás la sesión."><meta property="og:type" content="article"><meta property="og:url" content="/2012/02/22/cookies-en-un-iframe-en-internet-explorer-p3p-policy/"><meta property="og:image" content="/2012/02/22/cookies-en-un-iframe-en-internet-explorer-p3p-policy/cookies_en_un_iframe_en_internet_explorer_p3p_policy_hue3e183c5fa902cd4ae789f3e908b1fee_106009_1920x1080_fill_q75_box_center.jpg"><meta name=twitter:image content="/2012/02/22/cookies-en-un-iframe-en-internet-explorer-p3p-policy/cookies_en_un_iframe_en_internet_explorer_p3p_policy_hue3e183c5fa902cd4ae789f3e908b1fee_106009_1920x1080_fill_q75_box_center.jpg"></meta><meta property="article:section" content="blog"><meta property="article:published_time" content="2012-02-22T00:00:00+00:00"><meta property="article:modified_time" content="2012-02-22T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"></meta><link href=/scss/main.b984dc84751d063086429712c71f21050e6525409991bc1c2469172042095249.css integrity="sha256-uYTchHUdBjCGQpcSxx8hBQ5lJUCZkbwcJGkXIEIJUkk=" rel=stylesheet><link href=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css rel=stylesheet type=text/css></head><body><header class=web-header><h2><a class=back-to-home href=/ title="Back to home"><i class="fas fa-home"></i><div class=back-to-home__content><span class=back-to-home__action>Back to home</span><div class=back-to-home__title><img alt="Sergio Carracedo" class=avatar src=/i/sergiocarracedo_hu6caa808ff324b89bfea4b9d7d1c850ee_80590_100x100_fit_q75_box.jpg><h4>Sergio Carracedo</h4></div></div></a></h2><div class=web-header__page-title><span>Cookies en un IFRAME en Internet Explorer: p3p policy</span></div><div class=theme-switch><i class="theme-switch__theme fas fa-sun" id=theme-switch-light title="Switch to light theme"></i>
<i class="theme-switch__theme fas fa-moon" id=theme-switch-dark title="Switch to dark theme"></i></div></header><div class=main-content><article class="post post--single"><div class="post__main wrapper-1200"><aside class=post__metadata><time class=post__date datetime=2012-02-22><i class="far fa-calendar-alt"></i> Feb 22, 2012</time><div class=post__tags></div><span class=post__reading-time><i class="far fa-clock"></i> 2 minutes read</span></aside><header class=post__header><h1 class=post__title>Cookies en un IFRAME en Internet Explorer: p3p policy</h1></header><figure class=post__cover><img src=/2012/02/22/cookies-en-un-iframe-en-internet-explorer-p3p-policy/cookies_en_un_iframe_en_internet_explorer_p3p_policy_hue3e183c5fa902cd4ae789f3e908b1fee_106009_1200x400_fill_q75_box_center.jpg alt="Cookies en un IFRAME en Internet Explorer: p3p policy" width=1200 height=400></figure><div class=post__content><p>Si desarrollas  una aplicación PHP web que trabaja dentro de un IFRAME  lo más probable es que necesite usar una sesión y para almacenar el id de la sesión necesitarás una <strong>cookie</strong> (de esto se encarga el propio PHP) pero deberás tener en cuenta algunas consideraciones para evitarte <strong>problemas de funcionamiento en Internet Explorer 6+</strong></p><p>IE considera que el contenido del IFRAME es &ldquo;<em>contenido de terceras partes</em>&rdquo; y siguiendo la configuración por defecto de seguridad del navegador  <strong>bloqueará las cookies</strong> del IFRAME y por lo tanto perderás la sesión. Siempre existe la posibilidad de emplear el método de paso de sesión por URL, pero solo resolverá el problema respecto a PHP si usas otro tipo de herramientas que necesiten sesiones (Facebook, Twitter, etc) estas no tendrán acceso a su cookie.</p><h2 id=como-resolverlo>Como resolverlo</h2><p>Para resolver este problema, necesitamos que el IFRAME defina la <strong><a href=http://www.w3.org/P3P/details.html>política p3p</a></strong>, segun la wikipedia</p><blockquote><p>La <strong>Plataforma de Preferencias de Privacidad</strong> (<em>Platform for Privacy Preferences</em>) o <strong>P3P</strong> es un <a href=http://es.wikipedia.org/wiki/Protocolo title=Protocolo>protocolo</a> que permite a los <a href=http://es.wikipedia.org/wiki/Servidor_web title="Servidor web">sitios Web</a> declarar las intenciones de uso de la información recopilada sobre los usuarios que lo visitan y dar de esta forma un mayor control a éstos sobre su información personal cuando navegan. P3P fue desarrollado por el <a href=http://es.wikipedia.org/wiki/World_Wide_Web_Consortium title="World Wide Web Consortium">World Wide Web Consortium</a> (W3C) y se recomendó oficialmente el <a href=http://es.wikipedia.org/wiki/16_de_abril title="16 de abril">16 de abril</a> de <a href=http://es.wikipedia.org/wiki/2002 title=2002>2002</a>. La plataforma establece un formato estandar para declarar la identidad y las prácticas sobre la información de los usuarios. Esta información puede ser interpretada por usuarios o por software dedicado a este propósito. Por tanto se pueden construir herramientas (agentes de usuario) que permiten al usuario especificar sus preferencias y éste software se encarga de comprobar automáticamente si lo específicado por el usuario se verifica en un website concreto. Dependiendo de las preferencias especificadas el agente puede por ejemplo mostrar un mensaje de alerta, generar una ventana para pedir instrucciones, permitir el acceso, rechazar el acceso&mldr; El proceso de comprobación de las preferencias se debe llevar a cabo en una zona segura en la cual el servidor web debe recoger sólo la mínima información posible del cliente.</p></blockquote><p>Básicamente nos obliga a indicar nuestras <em>intenciones</em> <em>para que el navegador se fíe de nosotros</em>. La forma más sencilla de implementarlo en PHP es mediante el envío de cabeceras</p><pre tabindex=0><code>header(&#39;P3P: CP=&#34;NOI ADM DEV COM NAV OUR STP&#34;&#39;);
</code></pre><p>Tienes un listado completo del significado de estas directivas y de otras muchas en <a href=http://www.p3pwriter.com/LRN_111.asp>http://www.p3pwriter.com/LRN_111.asp</a> Esta cabecera mágica hará que nuestras cookies funcionen correctamente.   Este artículo se ha basado en información extraída de: <a href=http://stackoverflow.com/questions/389456/cookie-blocked-not-saved-in-iframe-in-internet-explorer>http://stackoverflow.com/questions/389456/cookie-blocked-not-saved-in-iframe-in-internet-explorer</a> <a href=http://blog.sweetxml.org/2007/10/minimal-p3p-compact-policy-suggestion.html>http://blog.sweetxml.org/2007/10/minimal-p3p-compact-policy-suggestion.html</a></p></div></div><aside class=post__nav-wrapper><div class=wrapper-1200><div class="post-nav post-nav--prev"><a class=post-nav__link href="/2012/04/10/disconectme-navega-de-forma-privada/?ref=footer"><div class=post-nav__cover><img alt=.NextPage.Title src=/2012/04/10/disconectme-navega-de-forma-privada/pexels-photo-906018_hud310338953d359bda2e8f16d9317fc58_112476_200x120_fill_q75_box_center.jpeg></div><div class=post-nav__title>Disconect.me: Navega de forma privada</div></a></div><div class=blog-link><a class=btn href=blog>All Blog posts</a></div><div class="post-nav post-nav--next"><a class=post-nav__link href="/2012/02/15/cck-blocks-separa-los-campos-de-un-nodo/?ref=footer"><div class=post-nav__cover><img alt=.PrevPage.Title class=post-nav__cover src=/2012/02/15/cck-blocks-separa-los-campos-de-un-nodo/cck_blocks_separa_los_campos_de_un_nodo_hue3e183c5fa902cd4ae789f3e908b1fee_58136_200x120_fill_q75_box_center.jpg></div><div class=post-nav__title>CCK Blocks: Separa los campos de un nodo</div></a></div></div></aside><aside class=post__comments><div class=wrapper-1200><div id=disqus_thread>To show the comments is mandatory accept cookie policy.</div></div></aside></article></div><footer class=web-footer><div class=wrapper-1200><div class=web-footer__left><div class=me><div class=me__avatar><img alt="Sergio Carracedo" src=/i/sergiocarracedo_hu6caa808ff324b89bfea4b9d7d1c850ee_80590_170x170_fit_q75_box.jpg></div><div class=me__titles><h1>Sergio Carracedo</h1><h2>Senior Fullstack developer.</h2><h3>Formula 1, cats, good conversations and small details lover.</h3></div></div></div><div class=web-footer__right><nav role=main class=menu><ul><li class=menu__item><a href>Home</a></li><li class=menu__item><a href=blog>Blog</a></li></ul></nav><div class=social><a class=social__link href=http://www.linkedin.com/in/sergiocarracedo target=_blank title=LinkedIn style=animation-delay:2s><i class="fab fa-linkedin"></i></a>
<a class=social__link href=mailto:hi+blog@sergiocarracedo.es target=_blank title=Email style=animation-delay:1.9333333333333333s><i class="fas fa-envelope"></i></a>
<a class=social__link href=https://github.com/sergiocarracedo target=_blank title=GitHub style=animation-delay:1.8666666666666667s><i class="fab fa-github"></i></a>
<a class=social__link href=https://www.drupal.org/u/sergiocarracedo target=_blank title=Drupal style=animation-delay:1.8s><i class="fab fa-drupal"></i></a>
<a class=social__link href=https://www.twitter.com/sergiocarracedo target=_blank title=Twitter style=animation-delay:1.7333333333333334s><i class="fab fa-twitter"></i></a>
<a class=social__link href=http://www.last.fm/user/gasman40 target=_blank title=Last.fm style=animation-delay:1.6666666666666667s><i class="fab fa-lastfm"></i></a>
<a class=social__link href=http://sergiocarracedo.tumblr.com/ target=_blank title=Tumblr style=animation-delay:1.6s><i class="fab fa-tumblr"></i></a></div></div></div></footer><script async src="https://www.googletagmanager.com/gtag/js?id=UA-133459072-1"></script>
<script>function runGA(){window.dataLayer=window.dataLayer||[];function e(){dataLayer.push(arguments)}e("js",new Date),e("config","UA-133459072-1")}</script><script>function runDisqus(){(function(){var e=document,t=e.createElement("script");t.src="https://sergiocarracedo.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()}</script><script src=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js></script>
<script>window.addEventListener("load",function(){window.cookieconsent.initialise({palette:{popup:{background:"#004262",text:"#fff"},button:{background:"#8ec760",text:"#ffffff"}},type:"opt-out",content:{message:"Este sitio usa cookies propias y de terceros para mejorar la experiencia de usuario y esas cosas.",allow:"Ok, continua",deny:"Nada de cookies",link:"Saber más",href:"cookies"},onStatusChange:function(e){e=="allow"&&runCookiesAllowed()},onInitialise:function(e){e=="allow"&&runCookiesAllowed()}})})</script><script>addEventListener("scroll",e=>{let t=document.getElementsByTagName("body")[0];t&&window.scrollY>10?t.classList.add("not-in-top"):t.classList.remove("not-in-top")});function runCookiesAllowed(){runGA(),runDisqus()}</script><script integrity="sha256-6W09eoRhk1Og2XFEl4eaBSED33MOr8P1V5qaL3z+PEY=" src=/js/theme.e96d3d7a84619353a0d9714497879a052103df730eafc3f5579a9a2f7cfe3c46.js></script></body></html>