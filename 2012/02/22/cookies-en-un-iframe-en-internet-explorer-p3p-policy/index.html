
<!DOCTYPE html>
<html lang="en" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sergio Carracedo - Cookies en un IFRAME en Internet Explorer: p3p policy</title>

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="keywords" content="Sergio Carracedo,"> 
    <meta name="description" content="Sergio Carracedo personal Blog,Si desarrollas  una aplicación PHP web que trabaja dentro de un IFRAME  lo más probable es que nece,"> 
    <meta name="author" content="Sergio Carracedo"> 
    <link rel="alternative" href="atom.xml" title="Sergio Carracedo" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    
<link rel="stylesheet" href="/css/sergiocarracedo.css">

    <meta name="description" content="Si desarrollas  una aplicación PHP web que trabaja dentro de un IFRAME  lo más probable es que necesite usar una sesión y para almacenar el id de la sesión necesitarás una cookie (de esto se encarga e">
<meta property="og:type" content="article">
<meta property="og:title" content="Cookies en un IFRAME en Internet Explorer: p3p policy">
<meta property="og:url" content="https://sergiocarracedo.es/2012/02/22/cookies-en-un-iframe-en-internet-explorer-p3p-policy/index.html">
<meta property="og:site_name" content="Sergio Carracedo">
<meta property="og:description" content="Si desarrollas  una aplicación PHP web que trabaja dentro de un IFRAME  lo más probable es que necesite usar una sesión y para almacenar el id de la sesión necesitarás una cookie (de esto se encarga e">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://sergiocarracedo.es/images/cookies_en_un_iframe_en_internet_explorer_p3p_policy.jpg">
<meta property="article:published_time" content="2012-02-22T00:00:00.000Z">
<meta property="article:modified_time" content="2021-04-26T06:48:37.053Z">
<meta property="article:author" content="Sergio Carracedo">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://sergiocarracedo.es/images/cookies_en_un_iframe_en_internet_explorer_p3p_policy.jpg">

    <script async src='https://www.google-analytics.com/analytics.js'></script>

    <script>
      function runGA() {
        window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
        ga('create', 'UA-133459072-1', 'auto');
        ga('send', 'pageview');
      }

      function runDisqus() {
        /*var disqus_config = function () {
          this.page.url = 'https://sergiocarracedo.es/';
          this.page.identifier = 'sergiocarracedo';
        }*/
        (function() { // DON'T EDIT BELOW THIS LINE
          var d = document, s = d.createElement('script');
          s.src = 'https://sergiocarracedo.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      }

      function runCookiesAllowed() {
        runGA();
        runDisqus();
      }
    </script>
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
    <div id="single">
    <div id="top">
  <div class="bar" style="width: 0;"></div>
  <div class="container-fluid">
    <div class="grid-row">
      <div class="col-xs-12 col-sm-3">
        <a class="back-to-home" href="/">
          <img src="/img/sergiocarracedo.jpg" alt="Sergio Carracedo" class="image-logo"/>
          <h4>
            Sergio Carracedo
          </h4>
        </a>
      </div>
      <div class="hidden-xs col-sm-6">
        <h3 class="subtitle">Cookies en un IFRAME en Internet Explorer: p3p policy</h3>
      </div>
    </div>
  </div>
  <div class="scrollbar"></div>
</div>

    <div class="section">
        <div class="article container-fluid-1200">
  <div class="grid-row">
    <div class="main col-xs-12">
      <h1 class="title">
        Cookies en un IFRAME en Internet Explorer: p3p policy
      </h1>
      <div class="stuff">
        <span>February 22, 2012</span>
      </div>

      
      <div class="article-image">
        <img src="/images/header_cookies_en_un_iframe_en_internet_explorer_p3p_policy.jpg" width="1200" height="400">
      </div>
      
      <div class="content markdown">
        <p>Si desarrollas  una aplicación PHP web que trabaja dentro de un IFRAME  lo más probable es que necesite usar una sesión y para almacenar el id de la sesión necesitarás una <strong>cookie</strong> (de esto se encarga el propio PHP) pero deberás tener en cuenta algunas consideraciones para evitarte <strong>problemas de funcionamiento en Internet Explorer 6+</strong></p>
<p>IE considera que el contenido del IFRAME es “<em>contenido de terceras partes</em>“ y siguiendo la configuración por defecto de seguridad del navegador  <strong>bloqueará las cookies</strong> del IFRAME y por lo tanto perderás la sesión. Siempre existe la posibilidad de emplear el método de paso de sesión por URL, pero solo resolverá el problema respecto a PHP si usas otro tipo de herramientas que necesiten sesiones (Facebook, Twitter, etc) estas no tendrán acceso a su cookie.</p>
<h2 id="Como-resolverlo"><a href="#Como-resolverlo" class="headerlink" title="Como resolverlo"></a>Como resolverlo</h2><p>Para resolver este problema, necesitamos que el IFRAME defina la <strong><a target="_blank" rel="noopener" href="http://www.w3.org/P3P/details.html">política p3p</a></strong>, segun la wikipedia</p>
<blockquote>
<p>La <strong>Plataforma de Preferencias de Privacidad</strong> (<em>Platform for Privacy Preferences</em>) o <strong>P3P</strong> es un <a target="_blank" rel="noopener" href="http://es.wikipedia.org/wiki/Protocolo" title="Protocolo">protocolo</a> que permite a los <a target="_blank" rel="noopener" href="http://es.wikipedia.org/wiki/Servidor_web" title="Servidor web">sitios Web</a> declarar las intenciones de uso de la información recopilada sobre los usuarios que lo visitan y dar de esta forma un mayor control a éstos sobre su información personal cuando navegan. P3P fue desarrollado por el <a target="_blank" rel="noopener" href="http://es.wikipedia.org/wiki/World_Wide_Web_Consortium" title="World Wide Web Consortium">World Wide Web Consortium</a> (W3C) y se recomendó oficialmente el <a target="_blank" rel="noopener" href="http://es.wikipedia.org/wiki/16_de_abril" title="16 de abril">16 de abril</a> de <a target="_blank" rel="noopener" href="http://es.wikipedia.org/wiki/2002" title="2002">2002</a>. La plataforma establece un formato estandar para declarar la identidad y las prácticas sobre la información de los usuarios. Esta información puede ser interpretada por usuarios o por software dedicado a este propósito. Por tanto se pueden construir herramientas (agentes de usuario) que permiten al usuario especificar sus preferencias y éste software se encarga de comprobar automáticamente si lo específicado por el usuario se verifica en un website concreto. Dependiendo de las preferencias especificadas el agente puede por ejemplo mostrar un mensaje de alerta, generar una ventana para pedir instrucciones, permitir el acceso, rechazar el acceso… El proceso de comprobación de las preferencias se debe llevar a cabo en una zona segura en la cual el servidor web debe recoger sólo la mínima información posible del cliente.</p>
</blockquote>
<p>Básicamente nos obliga a indicar nuestras <em>intenciones</em> <em>para que el navegador se fíe de nosotros</em>. La forma más sencilla de implementarlo en PHP es mediante el envío de cabeceras </p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">header('P3P: CP="NOI ADM DEV COM NAV OUR STP"');</span><br></pre></td></tr></tbody></table></figure>
<p>Tienes un listado completo del significado de estas directivas y de otras muchas en <a target="_blank" rel="noopener" href="http://www.p3pwriter.com/LRN_111.asp">http://www.p3pwriter.com/LRN_111.asp</a> Esta cabecera mágica hará que nuestras cookies funcionen correctamente.   Este artículo se ha basado en información extraída de: <a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/389456/cookie-blocked-not-saved-in-iframe-in-internet-explorer">http://stackoverflow.com/questions/389456/cookie-blocked-not-saved-in-iframe-in-internet-explorer</a> <a target="_blank" rel="noopener" href="http://blog.sweetxml.org/2007/10/minimal-p3p-compact-policy-suggestion.html">http://blog.sweetxml.org/2007/10/minimal-p3p-compact-policy-suggestion.html</a></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      </div>
    </div>
  </div>
</div>

<div class="post-nav">
  <div class="container-fluid-1200">
    <div class="grid-row">
      <div class="next col-xs-6">
        
          <div class="nav-previous">
            <a href="https://sergiocarracedo.es//2012/04/10/disconectme-navega-de-forma-privada/" rel="prev" class="nav-cover">
              <img src="/images/teaser_pexels-photo-906018.jpeg">
            </a>

            <a href="https://sergiocarracedo.es//2012/04/10/disconectme-navega-de-forma-privada/" rel="prev" class="nav-text">
              <i class="fa fa-arrow-left"></i> Disconect.me: Navega de forma privada
            </a>
          </div>
        
      </div>
      <div class="prev col-xs-6">
        
          <div class="nav-next">
            <a href="https://sergiocarracedo.es//2012/02/15/cck-blocks-separa-los-campos-de-un-nodo/" rel="next" class="nav-cover">
              <img src="/images/teaser_cck_blocks_separa_los_campos_de_un_nodo.jpg">
            </a>

            <a href="https://sergiocarracedo.es//2012/02/15/cck-blocks-separa-los-campos-de-un-nodo/" rel="next" class="nav-text">
              CCK Blocks: Separa los campos de un nodo <i class="fa fa-arrow-right"></i>
            </a>
          </div>
        
      </div>
    </div>
  </div>
</div>

<div class="post-comments container-fluid-1200">
    <div id="disqus_thread">To show the comments is mandatory accept cookie policy.</div>
</div>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<div id="post-aboutme">
  <div class="me container-fluid">
    <div class="grid-row">
      <div class="col-xs-12 mb-5">
        <div class="social">
  <a href="mailto:info@sergiocarracedo.es" class="social-link" title="info@sergiocarracedo.es">
    <i class="fas fa-envelope"></i>
  </a>
  <a href="https://github.com/sergiocarracedo" class="social-link" target="_blank">
    <i class="fab fa-github"></i>
  </a>
  <a href="https://www.drupal.org/u/sergiocarracedo" class="social-link" target="_blank">
    <i class="fab fa-drupal"></i>
  </a>

  <a href="http://www.linkedin.com/in/sergiocarracedo" class="social-link" target="_blank">
    <i class="fab fa-linkedin"></i>
  </a>
  <a href="https://www.twitter.com/sergiocarracedo" class="social-link" target="_blank">
    <i class="fab fa-twitter"></i>
  </a>
  <a href="http://www.last.fm/user/gasman40" class="social-link" target="_blank">
    <i class="fab fa-lastfm"></i>
  </a>
  <a href="http://sergiocarracedo.tumblr.com/" class="social-link" target="_blank">
    <i class="fab fa-tumblr"></i>
  </a>
</div>

      </div>
    </div>
  </div>

  <div class="claim container-fluid-1440">
    <div class="grid-row">
      <div class="col-xs-12">
        <h3>Front-end and back-end developer.<br />#formula1, good conversations and small details lover.</h3>
      </div>
    </div>
  </div>

  <div class="container-fluid-1440">
    <div class="grid-row">
      <div class="col-xs-12">
        <a href="/" class="back">
          Home
        </a>
      </div>
    </div>
  </div>

</div>


    </div>


</div>

</body>
<script src="https://cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.bootcss.com/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>


<script src="/js/jquery.min.js"></script>
<script src="/js/sergiocarracedo.js"></script>


<link href="https://cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.css" rel="stylesheet">
<link href="https://cdn.bootcss.com/photoswipe/4.1.3/default-skin/default-skin.min.css" rel="stylesheet">

<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
    <script>
      window.addEventListener("load", function(){
        window.cookieconsent.initialise({
          "palette": {
            "popup": {
              "background": "#004262",
              "text": "#fff"
            },
            "button": {
              "background": "#8ec760",
              "text": "#ffffff"
            }
          },
          "type": "opt-out",
          "content": {
            "message": "Este sitio usa cookies propias y de terceros para mejorar la experiencia de usuario y esas cosas.",
            "allow": "Ok, continua",
            "deny": "Nada de cookies",
            "link": "Saber más",
            "href": "https://sergiocarracedo.es/cookies.html",
          },
          "onStatusChange": function(status, chosenBefore) {
            if (status == 'allow') {
               runCookiesAllowed()
            }
          },
          "onInitialise" : function(status) {
            if (status == 'allow') {
               runCookiesAllowed()
            }
          }
        })
      });
    </script>


</html>
