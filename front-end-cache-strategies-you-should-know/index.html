<!doctype html><html><head><meta charset=UTF-8><meta content="IE=edge,chrome=1" http-equiv=X-UA-Compatible><meta content="width=device-width,minimum-scale=1" name=viewport><title>Sergio Carracedo | Front-End: Cache Strategies You Should Know</title>
<meta content="yes" name=apple-mobile-web-app-capable><meta content="black-translucent" name=apple-mobile-web-app-status-bar-style><meta content="Sergio Carracedo's personal page and blog" name=description><meta content="Sergio Carracedo" name=author><link href=/favicon.png rel=icon><meta property="og:title" content="Front-End: Cache Strategies You Should Know"><meta property="og:description" content="This article was published originally in DZone. I wrote it with Miguel García
Caches are very useful software components that all engineers must know. It is a transversal component that applies to all the tech areas and architecture layers such as operating systems, data platforms, backend, frontend, and other components. In this article, we are going to describe what is a cache and explain specific use cases focusing on the frontend and client side."><meta property="og:type" content="article"><meta property="og:url" content="https://sergiocarracedo.es/front-end-cache-strategies-you-should-know/"><meta property="og:image" content="https://sergiocarracedo.es/front-end-cache-strategies-you-should-know/_hub1ae221aa178f21b1687a813d198d8bd_266521_64e36f0aa1ba1c4220fe1bb71c2c8f5d.jpeg"><meta name=twitter:image content="https://sergiocarracedo.es/front-end-cache-strategies-you-should-know/_hub1ae221aa178f21b1687a813d198d8bd_266521_64e36f0aa1ba1c4220fe1bb71c2c8f5d.jpeg"></meta><meta property="article:section" content="blog">
<meta property="article:published_time" content="2023-05-07T00:00:00+00:00"><meta property="article:modified_time" content="2023-05-07T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"></meta>
<link rel=canonical href=https://dzone.com/articles/front-end-cache-strategies-you-should-know><link href=https://sergiocarracedo.es/scss/main.dd80fc7a15e8bc4fe9636ba6b750462905c3b2d8a50cfe3ff5b2536f6082e987.css integrity="sha256-3YD8ehXovE/pY2umt1BGKQXDstilDP4/9bJTb2CC6Yc=" rel=stylesheet><link href=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css rel=stylesheet type=text/css></head><body><header class=web-header><h2><a class=back-to-home href=/ title="Back to home"><i class="fas fa-home"></i><div class=back-to-home__content><span class=back-to-home__action>Back to home</span><div class=back-to-home__title><img alt="Sergio Carracedo" class=avatar src=/i/sergiocarracedo_hu6caa808ff324b89bfea4b9d7d1c850ee_80590_100x100_fit_q75_box.jpg><h4>Sergio Carracedo</h4></div></div></a></h2><div class=web-header__page-title><span>Front-End: Cache Strategies You Should Know</span></div><div class=theme-switch><i class="theme-switch__theme fas fa-sun" id=theme-switch-light title="Switch to light theme"></i>
<i class="theme-switch__theme fas fa-moon" id=theme-switch-dark title="Switch to dark theme"></i></div></header><div class=main-content><article class="post post--single"><div class="post__main wrapper-1200"><aside class=post__metadata><time class=post__date datetime=2023-05-07><i class="far fa-calendar-alt"></i> May 7, 2023</time><div class=post__tags><a href=https://sergiocarracedo.es/tags/frontend class=post__tag><span>frontend</span>
</a><a href=https://sergiocarracedo.es/tags/devops class=post__tag><span>devops</span></a></div><span class=post__reading-time><i class="far fa-clock"></i> 8 minutes read</span></aside><header class=post__header><h1 class=post__title>Front-End: Cache Strategies You Should Know</h1></header><figure class=post__cover><img src=/front-end-cache-strategies-you-should-know/_hub1ae221aa178f21b1687a813d198d8bd_266521_288ecb11e28bb8c7441c759cc15f281c.jpeg alt="Front-End: Cache Strategies You Should Know" width=1200 height=400></figure><div class=post__content><blockquote><p>This article was published originally in <a href=https://dzone.com/articles/front-end-cache-strategies-you-should-know>DZone</a>.
I wrote it with <a href=https://www.linkedin.com/in/mgarlorenzo/>Miguel García</a></p></blockquote><p><a href=https://dzone.com/articles/introducing-amp-assimilating-caching-quick-read-fo>Caches</a> are very useful software components that all engineers must know. It is a transversal component that applies to all the tech areas and architecture layers such as operating systems, data platforms, backend, frontend, and other components. In this article, we are going to describe what is a cache and explain specific use cases focusing on the frontend and <a href=https://dzone.com/articles/web-caching-client-side>client side</a>.</p><h1 id=what-is-a-cache>What Is a Cache?</h1><p>A cache can be defined in a basic way as <strong>an intermediate memory between the data consumer and the data producer</strong> that stores and provides the data that will be accessed many times by the same/different consumers.</p><p><strong>It is a transparent layer for the data consumer in terms of user usability except to improve performance</strong>. Usually, the reusability of data provided by the data producer is the key to taking advantage of the benefits of a cache. Performance is the other reason to use a cache system such as in-memory databases to provide a high-performance solution with low latency, high throughput, and concurrency.</p><p>For example, how many people query the weather on a daily basis and how many times do they repeat the same query? Let&rsquo;s suppose that there are 1,000 people in New York consulting the weather and 50% repeat the same query twice per day. In this scenario, if we can store the first query as close as possible to the user&rsquo;s device, we achieve two benefits increase the user experience because the data is provided faster and reduce the number of queries to the data producer/server side. The output is a better user experience and a solution that will support more concurrent users using the platform.</p><p><img src=1682263585167.png alt="Weather query scenario"></p><p>At a high level, there are two caching strategies that we can apply in a complementary way:</p><ul><li><p><strong>Client/Consumer Side</strong>: The data cached is stored on the consumer or user side, usually in the browser&rsquo;s memory when we are talking about web solutions (also called private cache).</p></li><li><p><strong><a href=https://dzone.com/articles/web-resource-caching-server-side>Server/Producer Side</a></strong>: The data cached is stored in the components of the data producer architecture.</p></li><li><p><img src=1682261298502.png alt="Client Side and Server Side"></p></li></ul><p>Caches like any other solution have a series of advantages that we are going to summarize:</p><ul><li><p><strong>Application performance</strong>: Provide faster response times because can serve data more quickly.</p></li><li><p><strong>Reduce load on the server side</strong>: When we apply caches to the previous system and reuse a piece of data, we are avoiding queries/requests to the following layer.</p></li><li><p><strong>Scalability and cost improvement</strong>: As data caching gets closer to the consumer, we increase the scalability and performance of the solution at a lower cost.</p></li><li><p>Components closer to the client side are more scalable and cheaper because three main reasons:</p></li><li><p>These components are <strong>focused on performance</strong> and <strong>availability</strong> but <strong>have poor consistency</strong>.</p></li><li><p>They have only part of the information: the data used more by the users.</p></li><li><p>In the case of the browser&rsquo;s local cache, there is no cost for the data producer.</p></li></ul><p><img src=1682269756129.png alt="Cost, Performance, and Consistency diagram"></p><p><strong>The big challenges of cache are data consistency and data freshness</strong>, which means how the data is synchronized and up-to-date across the organization. Depending on the use case, we will have more or fewer requirements restrictions because it is so different from caching images than the inventory stock or sales behavior.</p><h1 id=client-side-caches>Client-Side Caches</h1><p>Speaking about the client-side cache, we can have different types of cache that we are going to analyze a little bit in this article:</p><ul><li><strong>HTTP Caching</strong>: This caching type is an intermediate cache system, as it depends partially on the server.</li><li><strong>Cache API</strong>: This is a browser API(s) that allows us to cache requests in the browser.</li><li><strong>Custom Local Cache</strong>: The front-end app controls the cache storage, expiration, invalidation, and update.</li></ul><h2 id=http-caching>HTTP Caching</h2><p>It caches the HTTP requests for any resource (CSS, HTML, images, video, etc.) in the browsers, and it manages all related to storage, expiration, validation, fetch, etc., from the front end. The application’s point of view is almost transparent as it makes a request in a regular way and the browser does all the “magic."</p><p><img src=1682319560128.png alt="HTTP Caching"></p><p>The <strong>way of controlling the caching is by using</strong> <a href=https://dzone.com/articles/web-performance-101-http-headers>HTTP Headers</a>, in the server side, it adds cache-specific headers to the HTTP response, for example: &ldquo;Expires: Tue, 30 Jul 2023 05:30:22 GMT,&rdquo; then the browser knows this resource can be cached, and the next time the client (application) requests the same resource if the request time is before the expiration date the request will not be done, the browser will return the local copy of the resource.</p><p>It allows you to set the way the responses are disguised, as the same URL can generate different responses (and their cache should be handled in a different way). For example, in an API endpoint that returns some data (i.e., <a href=http://example.com/my-data>http://example.com/my-data</a>) we could use the request header <code>Content-type</code> to specify if we want the response in JSON or CSV, etc. Therefore, the cache should be stored with the response depending on the request header(s). For that, the server should set the response header <code>Vary: Accept-Language</code> to let the browser know the cache depends on that value. There are a lot of different headers to control the cache flow and behavior, but it is not the goal of this article to go deep into it. It will probably be addressed in another article.</p><p>As we mentioned before, this caching type needs the server to set the resources expiration, validation, etc. So this is not a pure frontend caching method or type, but it’s one of the simplest ways to cache the resources the front-end application uses, and it is complementary to the other way we will mention down below.</p><p>Related to this cache type, as it is an intermediate cache, we can even delegate it in a “piece” between the client and the server; for example, a CDN, a reverse proxy (for example Varnish), etc.</p><p><img src=1682321508603.png alt="HTTP Caching pros and cons"></p><h2 id=cache-api>Cache API</h2><p>It is quite <strong>similar to the HTTP caching method</strong>, but in this case, <strong>we control which requests are stored or extracted from the cache. We have to manage the cache expiration</strong> (and it’s not easy, because those caches were thought to live “forever”). Even if these APIs are available in the windowed contexts are very oriented to their usage in a worker context.</p><p>This cache is very oriented to use for offline applications. On the first request, we can get and cache all the resources need it (images, CSS, JS, etc.), allowing the application to work offline. It is very useful in mobile applications, for example with the use of maps for our GPS systems in addition to weather data. This allows us to have all the information for our hiking route even if we have no connection to the server.</p><p>One example of how it works in a windowed context:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>url</span> <span style=color:#f92672>=</span> <span style=color:#960050;background-color:#1e0010>‘</span><span style=color:#a6e22e>https</span><span style=color:#f92672>:</span><span style=color:#75715e>//catfact.ninja/breeds’
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>caches</span>.<span style=color:#a6e22e>open</span>(<span style=color:#e6db74>&#39;v1&#39;</span>).<span style=color:#a6e22e>then</span>((<span style=color:#a6e22e>cache</span>) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>cache</span>.<span style=color:#a6e22e>match</span>((<span style=color:#a6e22e>url</span>).<span style=color:#a6e22e>then</span>((<span style=color:#a6e22e>res</span>) =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>res</span>) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;it is in cache&#39;</span>)
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>json</span>())
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#39;it is NOT in cache&#39;</span>)
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>url</span>) .<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>res</span> =&gt; {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>cache</span>.<span style=color:#a6e22e>put</span>(<span style=color:#e6db74>&#39;test&#39;</span>, <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>clone</span>())
</span></span><span style=display:flex><span>            })
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><p><img src=1682321548541.png alt="Cache API pros and cons"></p><h2 id=custom-local-cache>Custom Local Cache</h2><p>In some cases, <strong>we will need more control over the cached data and the invalidation</strong> (not just expiration). <strong>Cache invalidation</strong> is more than just checking the <code>max-age</code> of a cache entry.</p><p>Imagine the weather app we mentioned above. This app allows the users to update the weather to reflect the real weather in a place. The app needs to do a request per city and transform the temperature values from F to ºC (this is a simple example: calculations can be more expensive in other use cases).</p><p><img src=1682319657108.png alt="Custom local cache"></p><p>To avoid doing requests to the server (even if it’s cached), we can do all the requests the first time, put all the data together in a data structure convenient for us, and store it in, for example in the browser’s IndexedDB, in the LocalStorage, SessionStorage or even in memory (not recommended). The next time we want to show the data, we can get it from the cache, not just the resource data (even the computation we did), saving network and computation time.</p><p>We can control the expiration of the caches by adding the issue time next to the API, and we can also control the cache invalidation. Imagine now that the user adds a new cat in its browser. We can just invalidate the cache and do the requests and calculations next time, or go further, updating our local cache with the new data. Or, another user can change the value, and the server will send an event to notify the change to all clients. For example, using <a href=https://dzone.com/articles/what-the-heck-are-websockets>WebSockets</a>, our front-end application can hear these events and invalidate the cache or just update the cache.</p><p><img src=1682266237133.png alt="Client to provider systems"></p><p>This kind of cache requires work on our side to check the caches and handle events that can invalidate or update it, etc., but fits very well in a hexagonal architecture where the data is consumed from the API using a port adaptor (repository) that can hear domain events to react to the changes and invalidate or update some caches.</p><p><img src=1682321582703.png alt="Custom local cache pros and cons"></p><p>This is not a cache generic solution. We need to think if it fits our use case as it requires work on the front-end application side to invalidate the caches or to emit and handle data change events. In most cases, the HTTP caching is enough.</p><h1 id=conclusion>Conclusion</h1><p><strong>Having a cache solution</strong> and good strategy <strong>should be a must in any software architecture, but our solution will be incomplete and probably not optimized</strong>. Caches are our best friends mostly in high-performance scenarios. It seems that the technical invalidation cache process is the challenge, but <strong>the biggest challenge is to understand the business scenarios and uses cases to identify what are the requirements in terms of data freshness and consistency</strong> that allow us to design and choose the best strategy.</p></div></div><aside class=post__nav-wrapper><div class=wrapper-1200><div class="post-nav post-nav--prev"><a class=post-nav__link href="https://sergiocarracedo.es/generative-ai-models-boosting-merchandising-analytics-user-experience/?ref=footer"><div class=post-nav__cover><img alt=.NextPage.Title src=/generative-ai-models-boosting-merchandising-analytics-user-experience/pexels-ksenia-chernaya-3965540_hue3e183c5fa902cd4ae789f3e908b1fee_347649_200x120_fill_q75_box_center.jpg></div><div class=post-nav__title>Generative AI Models: Boosting Merchandising...</div></a></div><div class=blog-link><a class=btn href=https://sergiocarracedo.es/blog>All Blog posts</a></div><div class="post-nav post-nav--next"><a class=post-nav__link href="https://sergiocarracedo.es/withdraw-your-library-there-is-another-better/?ref=footer"><div class=post-nav__cover><img alt=.PrevPage.Title class=post-nav__cover src=/withdraw-your-library-there-is-another-better/unsplash_a2g3LM0cGFg_hu8b7e0129ae7d7db4db842a2de88b3d91_136097_200x120_fill_q75_box_center.jpg></div><div class=post-nav__title>Withdraw your library because there is another one...</div></a></div></div></aside><aside class=post__search-wrapper><div class=wrapper-1200>Search in this blog:<form class=search-form action=https://sergiocarracedo.es/search method=get><label hidden for=search-input>Search</label>
<input type=text id=search-input name=query placeholder=Search class=search-form__input>
<button class=search-form__button>
<i class="fas fa-search"></i></button></form></div></aside><aside class=post__comments><div class=wrapper-1200><div id=disqus_thread>To show the comments is mandatory accept cookie policy.</div></div></aside></article></div><footer class=web-footer><div class=wrapper-1200><div class=web-footer__left><div class=me><div class=me__avatar><img alt="Sergio Carracedo" src=/i/sergiocarracedo_hu6caa808ff324b89bfea4b9d7d1c850ee_80590_170x170_fit_q75_box.jpg></div><div class=me__titles><h1>Sergio Carracedo</h1><h2>Senior Fullstack developer.</h2><h3>Always learning, cats, good conversations and small details lover.</h3></div></div></div><div class=web-footer__right><nav role=main class=menu><ul><li class=menu__item><a href=https://sergiocarracedo.es/>Home</a></li><li class=menu__item><a href=https://sergiocarracedo.es/blog>Blog</a></li></ul></nav><div class=social><a class=social__link href=http://www.linkedin.com/in/sergiocarracedo target=_blank title=LinkedIn style=animation-delay:2s><i class="fab fa-linkedin"></i>
</a><a class=social__link href=mailto:hi+blog@sergiocarracedo.es target=_blank title=Email style=animation-delay:1.9333333333333333s><i class="fas fa-envelope"></i>
</a><a class=social__link href=https://github.com/sergiocarracedo target=_blank title=GitHub style=animation-delay:1.8666666666666667s><i class="fab fa-github"></i>
</a><a class=social__link href=https://www.drupal.org/u/sergiocarracedo target=_blank title=Drupal style=animation-delay:1.8s><i class="fab fa-drupal"></i>
</a><a class=social__link href=https://www.twitter.com/sergiocarracedo target=_blank title=Twitter style=animation-delay:1.7333333333333334s><i class="fab fa-twitter"></i>
</a><a class=social__link href=http://www.last.fm/user/gasman40 target=_blank title=Last.fm style=animation-delay:1.6666666666666667s><i class="fab fa-lastfm"></i>
</a><a class=social__link href=http://sergiocarracedo.tumblr.com/ target=_blank title=Tumblr style=animation-delay:1.6s><i class="fab fa-tumblr"></i></a></div></div></div></footer><script async src="https://www.googletagmanager.com/gtag/js?id=G-87X78TXEGE"></script><script>function runGA(){window.dataLayer=window.dataLayer||[];function e(){dataLayer.push(arguments)}e("js",new Date),e("config","G-87X78TXEGE")}</script><script>function runDisqus(){(function(){var e=document,t=e.createElement("script");t.src="https://sergiocarracedo.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()}</script><script src=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js></script><script>window.addEventListener("load",function(){window.cookieconsent.initialise({palette:{popup:{background:"#004262",text:"#fff"},button:{background:"#8ec760",text:"#ffffff"}},type:"opt-out",content:{message:"Este sitio usa cookies propias y de terceros para mejorar la experiencia de usuario y esas cosas.",allow:"Ok, continua",deny:"Nada de cookies",link:"Saber más",href:"https://sergiocarracedo.es/cookies"},onStatusChange:function(e){e=="allow"&&runCookiesAllowed()},onInitialise:function(e){e=="allow"&&runCookiesAllowed()}})})</script><script>addEventListener("scroll",e=>{let t=document.getElementsByTagName("body")[0];t&&window.scrollY>10?t.classList.add("not-in-top"):t.classList.remove("not-in-top")});function runCookiesAllowed(){runGA(),runDisqus()}</script><script integrity="sha256-iiQa3rTjie3Ydsr4WEu2+aLDTaxKKVR3ZTwTYrRUjXs=" src=https://sergiocarracedo.es/js/theme.8a241adeb4e389edd876caf8584bb6f9a2c34dac4a295477653c1362b4548d7b.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js></script><script integrity="sha256-LVPRt2Ca+MpOY1KztdII4jRv+U0kJBcBZEvwhZr2a4Y=" src=https://sergiocarracedo.es/js/search.2d53d1b7609af8ca4e6352b3b5d208e2346ff94d24241701644bf0859af66b86.js></script></body></html>