<!doctype html><html><head><meta charset=UTF-8><meta content="IE=edge,chrome=1" http-equiv=X-UA-Compatible><meta content="width=device-width,minimum-scale=1" name=viewport><title>Sergio Carracedo | SPA (Vue / React / Angular) app loader</title>
<meta content="yes" name=apple-mobile-web-app-capable><meta content="black-translucent" name=apple-mobile-web-app-status-bar-style><meta content="Sergio Carracedo's personal page and blog" name=description><meta content="Sergio Carracedo" name=author><link href=/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link href=/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link href=/site.webmanifest rel=manifest><link color=#5bbad5 href=/safari-pinned-tab.svg rel=mask-icon><meta content="#da532c" name=msapplication-TileColor><meta content="#ffffff" name=theme-color><link crossorigin href="https://fonts.googleapis.com/css2?family=Rozha+One:wght@400;500;600;700&display=swap" rel=preconnect><link crossorigin href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;500;600;700&display=swap" rel=preconnect><link crossorigin href="https://fonts.googleapis.com/css2?family=Allura:wght@400;500;600;700&display=swap" rel=preconnect><meta property="og:title" content="SPA (Vue / React / Angular) app loader"><meta property="og:description" content="As big a SPA is, more resources (javascript, css, images, etc.) need to load before starting to work (render/show the application in the user&rsquo;s browser)
This, the time between the page starts to load and the user can interact with, is the TTI, Time to Interactive. This is an important metric for your application. As higher is the value lower is the user experience using the application.

TTI is a metric for any application, not only for SPAs."><meta property="og:type" content="article"><meta property="og:url" content="https://sergiocarracedo.es/spa-vue-react-angular-app-loader/"><meta property="og:image" content="https://sergiocarracedo.es/spa-vue-react-angular-app-loader/pexels-jeshoots-4956_hu8230377006275001436.jpg"><meta name=twitter:image content="https://sergiocarracedo.es/spa-vue-react-angular-app-loader/pexels-jeshoots-4956_hu8230377006275001436.jpg"></meta><meta property="article:section" content="blog">
<meta property="article:published_time" content="2023-12-04T00:00:00+00:00"><meta property="article:modified_time" content="2023-12-04T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"></meta>
<link href=https://sergiocarracedo.es/spa-vue-react-angular-app-loader/ rel=canonical><link href=https://sergiocarracedo.es/scss/main.min.cde848244c7b332714afd98080f3ff0ec5693c265db6053db94d3db335292b88.css integrity="sha256-zehIJEx7MycUr9mAgPP/DsVpPCZdtgU9uU09szUpK4g=" rel="stylesheet preconnect"><link href=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css rel="stylesheet preload" type=text/css></head><body><header class="web-header background-paper-secondary"><h2><a class=back-to-home href=/ title="Back to home"><i class="fas fa-home"></i><div class=back-to-home__content><span class=back-to-home__action>Back to home</span><div class=back-to-home__title><img alt="Sergio Carracedo" class=avatar src=/i/sergiocarracedo_hu15161314200389136556.jpg><h4>Sergio Carracedo</h4></div></div></a></h2><div class=web-header__page-title><span>SPA (Vue / React / Angular) app loader</span></div><div class=theme-switch><i class="theme-switch__theme fas fa-sun" id=theme-switch-light title="Switch to light theme"></i>
<i class="theme-switch__theme fas fa-moon" id=theme-switch-dark title="Switch to dark theme"></i></div></header><div class=main-content><article class="post post--single"><div class="post__main wrapper-1200"><aside class=post__metadata><time class=post__date datetime=2023-12-04><i class="far fa-calendar-alt"></i> Dec 4, 2023
</time><a href=https://sergiocarracedo.es/tags/vue class=post__tag><span>vue</span>
</a><a href=https://sergiocarracedo.es/tags/ux class=post__tag><span>ux</span>
</a><a href=https://sergiocarracedo.es/tags/loader class=post__tag><span>loader</span>
</a><span class=post__reading-time><i class="far fa-clock"></i> 5 minutes read</span></aside><header class=post__header><h1 class=post__title>SPA (Vue / React / Angular) app loader</h1></header><figure class=post__cover><img alt="SPA (Vue / React / Angular) app loader" height=400 src=/spa-vue-react-angular-app-loader/pexels-jeshoots-4956_hu162112671138568019.jpg width=1200></figure><div class=post__content><p>As big a SPA is, more resources (javascript, css, images, etc.) need to load before starting to work (render/show the application in the user&rsquo;s browser)</p><p>This, the time between the page starts to load and the user can interact with, is the TTI, <a href="https://web.dev/articles/tti?hl=en">Time to Interactive</a>. This is an important metric for your application. <strong>As higher is the value lower is the user experience</strong> using the application.</p><blockquote><p>TTI is a metric for any application, not only for SPAs.</p></blockquote><h2 id=how-to-improve-tti>How to improve TTI</h2><p>Improve the TTI (reduce it), depends on several factors:</p><ul><li>Network: latency, bandwidth, &mldr;</li><li>Host: Server load, CPU, disk speed, &mldr;</li><li>App size: The size and the number of resources to get from the host (remember the modern browsers limit the number of parallel request per host to 6)</li></ul><p>From the Front-end point of view, the things you can act on are the app size and the number of resources to get.</p><p>You can split your application into chunks and group the resources by page, only loading the resources necessary for the first load. You can check your module bundler about how to do that.</p><p>This requires time and effort and sometimes is not possible to invest time in that, but <strong>there is something simple you can do to improve the user experience</strong></p><h2 id=app-loader>App loader</h2><p>With the typical SPA configuration, when the user reaches your page, nothing is shown before the SPA loads and renders the content. This time can be just a couple of seconds, but from the user&rsquo;s point of view, nothing is happening. We are not providing feedback and that is frustrating. Probably your application will show a loader when the SPA will be loaded, and mounted in the DOM, but we should show something before that.</p><p>If you check your favorite js framework entry file, you will find a code that mounts the app into the DOM</p><h4 id=vue>Vue</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// main.ts
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>createApp</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>App</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;./App.vue&#39;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>createApp</span>(<span style=color:#a6e22e>App</span>).<span style=color:#a6e22e>mount</span>(<span style=color:#e6db74>&#39;#app&#39;</span>)
</span></span></code></pre></div><h4 id=react>React</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>createRoot</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;react-dom/client&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>domNode</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>getElementById</span>(<span style=color:#e6db74>&#39;app&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>root</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createRoot</span>(<span style=color:#a6e22e>domNode</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>root</span>.<span style=color:#a6e22e>render</span>(&lt;<span style=color:#f92672>App</span> /&gt;);
</span></span></code></pre></div><h4 id=angular>Angular</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>Component</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;@angular/core&#39;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>@Component</span>({
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selector</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;app&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>templateUrl</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;./app.component.html&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>styleUrls</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;./app.component.css&#39;</span>],
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AppComponent</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>title</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;Test&#39;</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>I could continue writing examples for other frameworks, but the basics are the same, your <code>index.html</code> includes an element with the <code>app</code> id (<code>&lt;div id="app">&lt;div></code>), and the framework, will mount the application here after load and render it</p><p>What &ldquo;Mount&rdquo; action does is to replace the DOM element content (#app in the examples) with the DOM the framework generates, knowing that we can use it at our convenience.</p><p>Any content inside the <em>app mount point</em> will be shown until the framework replaces it, so we can display our loader there, and when the app is mounted it will disappear. For example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>html</span>&gt;&lt;/<span style=color:#f92672>html</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>body</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;#app&#34;</span>&gt;
</span></span><span style=display:flex><span>    Loading app...
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>body</span>&gt;
</span></span></code></pre></div><h2 id=how-to-show-the-loader-as-soon-as-possible-tips-and-recommendations-for-the-app-loader>How to show the loader as soon as possible: Tips and recommendations for the app loader</h2><p>There is another metric you should know: FCP (<a href="https://web.dev/articles/fcp?hl=en">First Contentful Paint</a>), this is the time from the page starts to load and when <strong>any</strong> part of the page is rendered.</p><p>We want to make this time as low as possible, our app loader will be unuseful if it takes a &ldquo;long&rdquo; time to load as we will reproduce the same as we are trying to avoid.</p><p>Remember the browser will load the HTML file first and will load the links (images, CSS, JS, etc&mldr;) in parallel (bear in mind some of those requests block the render)</p><p>To achieve it you can follow the recommendations/tips down bellow:</p><h3 id=use-inline-css-js-and-images>Use inline CSS, JS, and images</h3><p>If your loader depends on an external stylesheet <code>&lt;link rel="stylesheep" type="text/css" href="style.css"></code> file, on an image <code>&lt;img src="./my-image.gif"></code> or in a js file the browser will need to load it before, and this takes time (and can be blocked by another request).</p><p>Use inline CSS, JS, and images. You can include SVG images as part of the HTML document and for binary images (JPG, GIF, etc) you can use <a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URLs>data urls</a></p><h3 id=make-it-simple-as-possible>Make it simple as possible</h3><p>Remember the goal of this app loader is to provide feedback to the user to let her/him know the app is loading, no need to create the best loader in the world with animations, interactivity, etc&mldr;</p><h3 id=avoid-css-conflicts-with-the-app>Avoid CSS conflicts with the app</h3><p>If you put all the loader code inside the app mount point it will be replaced, so any css class you are applying will be removed avoiding headaches.</p><h3 id=eliminate-render-blocking-resources>Eliminate render-blocking resources</h3><p>Some html tags trigger browser processes that blocks the rendering until the process will finish, try to remove it as much as possible:</p><ul><li>Don&rsquo;t use @import for CSS (use <code>link</code> tag)</li><li>Use <code>defer</code> and <code>async</code> in javascript</li><li>More tips at <a href=https://blog.logrocket.com/9-tricks-eliminate-render-blocking-resources/>https://blog.logrocket.com/9-tricks-eliminate-render-blocking-resources/</a></li></ul><h2 id=example>Example</h2><p>I created a simple example in Angular, but the framework is irrelevant</p><p>Check an example in <a href="https://codesandbox.io/p/devbox/keen-kilby-5958v9?file=%2Fsrc%2Fmain.ts%3A10%2C1">code sandbox</a></p><blockquote><p>The mount code has a 5s delivery delay to let you appreciate the loader</p></blockquote><p>As you can see in the gif bellow, the loader is shown as soon as possible, as soon as the browser loads the html, and the loader is present until the app is mounted, and the user know something is happening.
<img alt=screen-capture.gif src=/spa-vue-react-angular-app-loader/screen-capture.gif></p><p>In terms of usability, not only in websites, in any app, (web, desktop, mobile, cli, etc) you must provide feedback to the user to let him/her know something is happening. It&rsquo;s very frustrating to wait for something without knowing if the app is frozen or not or if is doing something and the button just does not work.</p><p>With this technique you can improve the user experience of your app with a simple change of a few bytes that don&rsquo;t increase the FCP time more than a few milliseconds.</p></div></div><aside class=post__nav-wrapper><div class=wrapper-1200><div class="post-nav post-nav--prev"><a class=post-nav__link href="https://sergiocarracedo.es/2023-in-a-nutshell/?ref=footer"><div class="post-nav__cover btn btn--img btn--hover-parent"><img alt=.Next.Title src=/2023-in-a-nutshell/pexels-engin-akyurt-13088176_hu16308728945018717420.jpg></div><div class=post-nav__title>2023 in a Nutshell</div></a></div><div class=blog-link><a class="btn btn--outlined" href=https://sergiocarracedo.es/blog>All Blog posts</a></div><div class="post-nav post-nav--next"><a class=post-nav__link href="https://sergiocarracedo.es/using-cache-to-decouple-frontend-code/?ref=footer"><div class="post-nav__cover btn btn--img btn--hover-parent"><img alt=.Prev.Title class=post-nav__cover src=/using-cache-to-decouple-frontend-code/kimi-lee-Dsg--4yCqCI-unsplash_hu14712087633622311797.jpg></div><div class=post-nav__title>The advantage of using cache to decouple the...</div></a></div></div><div class="wrapper-1200 post__nav-years"><ul class=years><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2024>2024</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2023>2023</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2022>2022</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2021>2021</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2020>2020</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2019>2019</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2018>2018</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2017>2017</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2016>2016</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2015>2015</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2013>2013</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2012>2012</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2011>2011</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2010>2010</a></li></ul></div></aside><aside class=post__search-wrapper><div class=wrapper-1200>Search in <strong>143</strong> blog posts:<form action=https://sergiocarracedo.es/search class="search-form search-form--dark search-form--l" method=get><label for=search-input hidden>Search</label>
<input class=search-form__input id=search-input name=query placeholder=Search type=text>
<button aria-label="Search in the blog" class=search-form__button>
<i class="fas fa-search"></i></button></form></div></aside><aside class=post__comments><div class=wrapper-1200><div id=disqus_thread>To show comments is mandatory to accept cookie policy.</div></div></aside></article></div><footer class="web-footer background-paper-secondary"><div class=wrapper-1200><div class=web-footer__left><div class=me><div class=me__avatar><img alt="Sergio Carracedo" height=180 src=/i/sergiocarracedo_hu3613990337080381956.jpg width=180></div><div class=me__titles><h1>Sergio Carracedo</h1><h2>Senior Fullstack developer.</h2><h3>Always learning, cats, good conversations and small details lover.</h3></div></div></div><div class=web-footer__right><nav class=menu><ul role=menu><li class=menu__item role=presentation><a role=menuitem href=https://sergiocarracedo.es/>Home</a></li><li class=menu__item role=presentation><a role=menuitem href=https://sergiocarracedo.es/blog>Blog</a></li></ul></nav><div class=social><a class=social__link href=http://www.linkedin.com/in/sergiocarracedo target=_blank title=LinkedIn style=animation-delay:2s><i class="fab fa-linkedin"></i>
</a><a class=social__link href=mailto:hi+blog@sergiocarracedo.es target=_blank title=Email style=animation-delay:1.9333333333333333s><i class="fas fa-envelope"></i>
</a><a class=social__link href=https://github.com/sergiocarracedo target=_blank title=GitHub style=animation-delay:1.8666666666666667s><i class="fab fa-github"></i>
</a><a class=social__link href=https://www.drupal.org/u/sergiocarracedo target=_blank title=Drupal style=animation-delay:1.8s><i class="fab fa-drupal"></i>
</a><a class=social__link href=https://www.twitter.com/sergiocarracedo target=_blank title=Twitter style=animation-delay:1.7333333333333334s><i class="fab fa-twitter"></i>
</a><a class=social__link href=http://www.last.fm/user/gasman40 target=_blank title=Last.fm style=animation-delay:1.6666666666666667s><i class="fab fa-lastfm"></i>
</a><a class=social__link href=http://sergiocarracedo.tumblr.com/ target=_blank title=Tumblr style=animation-delay:1.6s><i class="fab fa-tumblr"></i></a></div></div></div></footer><script async src="https://www.googletagmanager.com/gtag/js?id=G-87X78TXEGE"></script><script>function runGA(){window.dataLayer=window.dataLayer||[];function e(){dataLayer.push(arguments)}e("js",new Date),e("config","G-87X78TXEGE")}</script><script>function runDisqus(){(function(){var e=document,t=e.createElement("script");t.src="https://sergiocarracedo.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()}</script><script src=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js></script><script>window.addEventListener("load",function(){window.cookieconsent.initialise({palette:{popup:{background:"#004262",text:"#fff"},button:{background:"#8ec760",text:"#ffffff"}},type:"opt-out",content:{message:"Este sitio usa cookies propias y de terceros para mejorar la experiencia de usuario y esas cosas.",allow:"Ok, continua",deny:"Nada de cookies",link:"Saber más",href:"https://sergiocarracedo.es/cookies"},onStatusChange:function(e){e=="allow"&&runCookiesAllowed()},onInitialise:function(e){e=="allow"&&runCookiesAllowed()}})})</script><script>addEventListener("scroll",e=>{let t=document.getElementsByTagName("body")[0];t&&window.scrollY>10?t.classList.add("not-in-top"):t.classList.remove("not-in-top")});function runCookiesAllowed(){runGA(),runDisqus()}</script><script integrity="sha256-hyPros3hoBf0jJM1+zayQLFFkchXwy4d/k2QMvk0sHs=" src=https://sergiocarracedo.es/js/theme.min.8723eba2cde1a017f48c9335fb36b240b14591c857c32e1dfe4d9032f934b07b.js></script><script src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js type=text/javascript></script><script integrity="sha256-RbHPlXzHpytxkjPwfQ5YOIACraziwCE1p/czQA3M/hM=" src=https://sergiocarracedo.es/js/search.min.45b1cf957cc7a72b719233f07d0e58388002adace2c02135a7f733400dccfe13.js></script></body></html>