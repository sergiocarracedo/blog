<!doctype html><html lang=en-us><head><meta charset=UTF-8><meta content="IE=edge,chrome=1" http-equiv=X-UA-Compatible><meta content="width=device-width,minimum-scale=1" name=viewport><title>Sergio Carracedo | Column related features: Lessons I Learned Creating a Table Component (3/4)</title>
<meta content="yes" name=mobile-web-app-capable><meta content="black-translucent" name=apple-mobile-web-app-status-bar-style><meta content="Sergio Carracedo's personal page and blog" name=description><meta content="Sergio Carracedo" name=author><link href=https://sergiocarracedo.es//index.xml rel=alternate title="Sergio Carracedo" type=application/rss+xml><link href=/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link href=/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link href=/site.webmanifest rel=manifest><link color=#5bbad5 href=/safari-pinned-tab.svg rel=mask-icon><meta content="#da532c" name=msapplication-TileColor><meta content="#ffffff" name=theme-color><link crossorigin href="https://fonts.googleapis.com/css2?family=Rozha+One:wght@400;500;600;700&display=swap" rel=preconnect><link crossorigin href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;500;600;700&display=swap" rel=preconnect><link crossorigin href="https://fonts.googleapis.com/css2?family=Allura:wght@400;500;600;700&display=swap" rel=preconnect><meta property="og:title" content="Column related features: Lessons I Learned Creating a Table Component (3/4)"><meta property="og:description" content="
This post is part of a post series: First part, Second part, Fourth part and an extra related post: Writing a query builder to filter data

I want to use this last post in the series to discuss col-related features, such as col sorting, hidden cols, excluded cols, fixed cols, etc.
User-defined cols vs internal cols
It&rsquo;s important to know that one thing is the cols defined by the user, those are data cols and are defined via the cols definition property, and another thing is the cols in general, which include the user cols, but also cols are defined by other props or features of the table (internal cols), for example the col that renders the checkboxes in the case of a selectable table, the col, that shows an arrow to expand the col, the col that renders the action buttons, etc."><meta property="og:type" content="article"><meta property="og:url" content="https://sergiocarracedo.es/creating-a-table-component-iii/"><meta property="og:image" content="https://sergiocarracedo.es/creating-a-table-component-iii/pexels-pixabay-221392_hu10446465283417481121.jpg"><meta name=twitter:image content="https://sergiocarracedo.es/creating-a-table-component-iii/pexels-pixabay-221392_hu10446465283417481121.jpg"></meta><meta property="article:section" content="blog">
<meta property="article:published_time" content="2024-11-12T00:00:00+00:00"><meta property="article:modified_time" content="2024-11-12T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"></meta>
<link href=https://sergiocarracedo.es/creating-a-table-component-iii/ rel=canonical><link href=https://sergiocarracedo.es/scss/main.min.c6aeadd0f64f9e58a5f36b759b3c5f69f04adcbaf95c581a64fdd28dfd1410e8.css integrity="sha256-xq6t0PZPnlil82t1mzxfafBK3Lr5XFgaZP3Sjf0UEOg=" rel="stylesheet preconnect"><link as=style href=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css rel="stylesheet preload" type=text/css></head><body><header class="web-header background-paper-secondary"><h2><a class=back-to-home href=/ title="Back to home"><i class="fas fa-home"></i><div class=back-to-home__content><span class=back-to-home__action>Back to home</span><div class=back-to-home__title><img alt="Sergio Carracedo" class=avatar src=/i/sergiocarracedo_hu15161314200389136556.jpg width=100 height=100><h4>Sergio Carracedo</h4></div></div></a></h2><div class=web-header__page-title><span>Column related features: Lessons I Learned Creating a Table Component (3/4)</span></div><div class=theme-switch><i class="theme-switch__theme fas fa-sun" id=theme-switch-light title="Switch to light theme"></i>
<i class="theme-switch__theme fas fa-moon" id=theme-switch-dark title="Switch to dark theme"></i></div></header><div class=main-content><article class="post post--single"><div class="post__main wrapper-1200"><aside class=post__metadata><time class=post__date datetime=2024-11-12><i class="far fa-calendar-alt"></i> Nov 12, 2024
</time><a href=https://sergiocarracedo.es/tags/table class=post__tag><span>table</span>
</a><a href=https://sergiocarracedo.es/tags/ui class=post__tag><span>ui</span>
</a><span class=post__reading-time><i class="far fa-clock"></i> 6 minutes read</span></aside><header class=post__header><h1 class=post__title>Column related features: Lessons I Learned Creating a Table Component (3/4)</h1></header><figure class=post__cover><img alt="Column related features: Lessons I Learned Creating a Table Component (3/4)" height=400 src=/creating-a-table-component-iii/pexels-pixabay-221392_hu7282119050044133179.jpg width=1200></figure><div class=post__content><blockquote><p>This post is part of a post series: <a href=https://sergiocarracedo.es/creating-a-table-component-i/>First part</a>, <a href=https://sergiocarracedo.es/creating-a-table-component-ii/>Second part</a>, <a href=https://sergiocarracedo.es/creating-a-table-component-iv/>Fourth part</a> and an extra related post: <a href=https://sergiocarracedo.es/query-builder-filter-data/>Writing a query builder to filter data</a></p></blockquote><p>I want to use this last post in the series to discuss col-related features, such as col sorting, hidden cols, excluded cols, fixed cols, etc.</p><h2 id=user-defined-cols-vs-internal-cols>User-defined cols vs internal cols</h2><p>It&rsquo;s important to know that one thing is the cols defined by the user, those are data cols and are defined via the cols definition property, and another thing is the cols in general, which include the user cols, but also cols are defined by other props or features of the table (internal cols), for example the col that renders the checkboxes in the case of a selectable table, the col, that shows an arrow to expand the col, the col that renders the action buttons, etc.</p><p>In the next points, I will refer to user-defined cols except if I mention the opposite.</p><h2 id=col-sorting>Col sorting</h2><p>This is about the order of the columns in the table, it is very convenient (and common) to render the columns in the same order as they are defined in the definition array, but in some use cases, it can be useful to let the user to reorder the columns to decide which ones are more relevant.
I used a property in the col definition object, for example, <code>order</code>.</p><p>I always try to avoid defining all the definitions using a default behavior, in this case, the developer can decide to don&rsquo;t set the order in some columns, the criteria to get the final order I decided to apply is to assign a big number to the cols without an explicit order and then order all the columns by the order field value. If more than one col has the same order value, the first in the array has priority and is before the orders on the table.</p><p>Talking about the UI there are multiple ways to let the user decide the order, for example dragging the cols, with a col&rsquo;s menu action, or dragging and dropping the cols&rsquo; names in a config section of the table. In any case, we must let the developer block some columns in case it will be necessary, for that we can add a new property to the col&rsquo;s definition: <code>noSortable</code>, which is false by default.</p><p>One important thing about that is, makes no sense to let &ldquo;block&rdquo; columns in the middle of the table as you could not drag the blocked col but you can move the cols around it, and that is basically the same as allowing to sort it.</p><p><figure class=image-caption><img src=/creating-a-table-component-iii/sort01_hu18225081974921989717.jpg alt="Sort cols" title width=1100 height=475 srcset="/creating-a-table-component-iii/sort01_hu2866117723658827125.webp 458w, /creating-a-table-component-iii/sort01_hu7854714725331232053.webp 776w" sizes="(max-width: 458px) 100vw, 776px"><figcaption></figcaption></figure></p><p>I decided to only block the columns at the ends of the table, and only the ones between them can be sorted don&rsquo;t let move the columns before or after the blocked ones on the left and right respectively, this is also related to Fixed cols.</p><p><figure class=image-caption><img src=/creating-a-table-component-iii/img_hu8781459130167130783.jpg alt="Sorting cols ends" title width=1100 height=397 srcset="/creating-a-table-component-iii/img_hu18092045524493528444.webp 458w, /creating-a-table-component-iii/img_hu8474571949806491440.webp 776w" sizes="(max-width: 458px) 100vw, 776px"><figcaption></figcaption></figure></p><p>Regarding the non-user-defined cols, those are not part of the order logic, those cols must be in the position the table requires by design. To achieve that, the table stores internally 2 lists of cols, one the user-defined cols, and all the cols (that included both &ldquo;internal&rdquo; cols and user-defined cols with extra metadata)</p><h2 id=hidden-cols>Hidden cols</h2><p>One feature we decided to implement was the hidden cols. I want to allow the user to select the cols she/he wants to see in the table to adapt the table to her/his use case.</p><p>But as before, we should have a way to control which cols can be hidden by the user, and for that, we must add a property to the col definition (<code>noHiddeable</code>) to set the column as &ldquo;mandatory visible&rdquo;.</p><p>To hide a column the user can click in a dropdown menu on the col header, but we must provide a way to list all the columns (including the hidden ones) and make them visible or hide any column, you can do that in a modal, side panel, etc. As an idea, but not a unique solution, I used the same col names&rsquo; list that allows to order of the cols&rsquo; position to show or hide a column.</p><p>I recommend you treat hidden cols as visible col for the ordering to be consistent when the user unhides it.</p><h2 id=excluded-cols>Excluded cols</h2><p>In some cases we need to hide a col from the render, for example, we need the value to define an initial rows&rsquo; sort, but we don&rsquo;t want to show the column. You can think that is the same as a hidden col, but is not. A hidden col is a col we show in the cols list in other words is a col the user can know about, but an excluded col is for internal use.
To set a col as excluded we use again a col&rsquo;s definition property (<code>excluded</code>) and you must remember to filter this column in anything related to the visualization: render, col order, etc.</p><h2 id=fixed-cols>Fixed cols</h2><p>When the table contains a lot of cols, it can be useful to fix some of them, in this case, I decided to not set this in the cols definition, I think is something related to the table itself, so I added a property in the table component to set the number of fixed cols.</p><p>The fixed cols must be in the &ldquo;edges&rdquo; of the table, yes, plural, as you can have fixed cols on the left side and the right side, and not just one, you can have multiple fixed cols on each side.</p><p>Regarding the property, I think is very convenient to accept a number, that represents the number of fixed cols on the left side, but also accept an object or tuple to define the number of fixed cols on each side. ex.:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=display:flex><span>&lt;<span style=color:#f92672>Table</span> <span style=color:#a6e22e>fixedCols</span><span style=color:#f92672>=</span>{<span style=color:#ae81ff>1</span>}/&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>Table</span> <span style=color:#a6e22e>fixedCols</span><span style=color:#f92672>=</span>{[<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>3</span>]}/&gt;
</span></span></code></pre></div><p>To define which cols are the fixed ones, the table first needs to order the cols and then fix the ones that are at the beginning and/or end of the list, always based on the property.</p><p>For the internal cols the fixed property should not affect them, but we need to bear in mind that those internal cols can be fixed, for example, the col with the check to select rows is an internal col, that in our implementation is fixed independently of the table prop.</p><p>Also, it is important to force some flags or properties in the fixed cols to overwrite the user config, for example, a fixed col is not sortable.</p><h2 id=in-the-next-chapter>In the next chapter</h2><p>A table component is (or can be) a complex component, and I prefer to provide the maximum number of features in the table itself, making it unnecessary to think about the implementation outside of the table, and making it simple to fix bugs and maintain the table. If you like this approach (vs simple table that only renders data in a tabular way) there are a lot of things to think about, I will talk about Table settings persistence, nested rows, row actions, toolbar, action bar, empty state, async loading, expandable rows in the next post.</p></div></div><aside class=post__nav-wrapper><div class=wrapper-1200><div class="post-nav post-nav--prev"><a class=post-nav__link href="https://sergiocarracedo.es/creating-a-table-component-iv/?ref=footer"><div class="post-nav__cover btn btn--img btn--hover-parent"><img alt=.Next.Title src=/creating-a-table-component-iv/cover_hu14815433998497247426.jpg width=200 height=120></div><div class=post-nav__title>Even more features. Lessons I Learned Creating a...</div></a></div><div class=blog-link><a class="btn btn--outlined" href=https://sergiocarracedo.es/blog>All Blog posts</a></div><div class="post-nav post-nav--next"><a class=post-nav__link href="https://sergiocarracedo.es/query-builder-filter-data/?ref=footer"><div class="post-nav__cover btn btn--img btn--hover-parent"><img alt=.Prev.Title class=post-nav__cover src=/query-builder-filter-data/pexels-igor-starkov-233202-1117452_hu9364124715067908968.jpg width=200 height=120></div><div class=post-nav__title>Query builder to filter data in TypeScript</div></a></div></div><div class="wrapper-1200 post__nav-years"><ul class=years><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2024>2024</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2023>2023</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2022>2022</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2021>2021</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2020>2020</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2019>2019</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2018>2018</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2017>2017</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2016>2016</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2015>2015</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2013>2013</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2012>2012</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2011>2011</a></li><li><a class=link href=https://sergiocarracedo.es/blog/by-year#2010>2010</a></li></ul></div></aside><aside class=post__search-wrapper><div class=wrapper-1200>Search in <strong>146</strong> blog posts:<form action=https://sergiocarracedo.es/search class="search-form search-form--dark search-form--l" method=get><label for=search-input hidden>Search</label>
<input class=search-form__input id=search-input name=query placeholder=Search type=text>
<button aria-label="Search in the blog" class=search-form__button>
<i class="fas fa-search"></i></button></form></div></aside><aside class=post__comments><div class=wrapper-1200><div id=disqus_thread>To show comments is mandatory to accept cookie policy.</div></div></aside></article></div><footer class="web-footer background-paper-secondary"><div class=wrapper-1200><div class=web-footer__left><div class=me><div class=me__avatar><img alt="Sergio Carracedo" height=180 src=/i/sergiocarracedo_hu3613990337080381956.jpg width=180></div><div class=me__titles><h1>Sergio Carracedo</h1><h2>Senior Fullstack developer.</h2><h3>Always learning, cats, good conversations and small details lover.</h3></div></div></div><div class=web-footer__right><nav class=menu><ul role=menu><li class=menu__item role=presentation><a role=menuitem href=https://sergiocarracedo.es/>Home</a></li><li class=menu__item role=presentation><a role=menuitem href=https://sergiocarracedo.es/blog>Blog</a></li><li class=menu__item role=presentation><a role=menuitem href=https://sergiocarracedo.es/index.xml>RSS Feed</a></li></ul></nav><div class=social><a class=social__link href=http://www.linkedin.com/in/sergiocarracedo target=_blank title=LinkedIn style=animation-delay:2s><i class="fab fa-linkedin"></i>
</a><a class=social__link href=mailto:hi+blog@sergiocarracedo.es target=_blank title=Email style=animation-delay:1.9333333333333333s><i class="fas fa-envelope"></i>
</a><a class=social__link href=https://github.com/sergiocarracedo target=_blank title=GitHub style=animation-delay:1.8666666666666667s><i class="fab fa-github"></i>
</a><a class=social__link href=https://bsky.app/profile/sergiocarracedo.es target=_blank title=Bluesky style=animation-delay:1.8s><svg fill="none" viewBox="0 0 64 57"><path fill="currentcolor" d="M13.873 3.805C21.21 9.332 29.103 20.537 32 26.55v15.882c0-.338-.13.044-.41.867-1.512 4.456-7.418 21.847-20.923 7.944-7.111-7.32-3.819-14.64 9.125-16.85-7.405 1.264-15.73-.825-18.014-9.015C1.12 23.022.0 8.51.0 6.55.0-3.268 8.579-.182 13.873 3.805zm36.254.0C42.79 9.332 34.897 20.537 32 26.55v15.882c0-.338.13.044.41.867 1.512 4.456 7.418 21.847 20.923 7.944 7.111-7.32 3.819-14.64-9.125-16.85 7.405 1.264 15.73-.825 18.014-9.015C62.88 23.022 64 8.51 64 6.55c0-9.818-8.578-6.732-13.873-2.745z"/></svg>
</a><a class=social__link href=https://www.drupal.org/u/sergiocarracedo target=_blank title=Drupal style=animation-delay:1.7333333333333334s><i class="fab fa-drupal"></i>
</a><a class=social__link href=https://www.npmjs.com/~sergiocarracedo target=_blank title=Npm style=animation-delay:1.6666666666666667s><svg viewBox="0 0 780 250" aria-hidden="true"><path fill="currentcolor" d="M240 250h1e2v-50h1e2V0H240V250zM340 50h50v1e2h-50V50zM480 0v2e2h1e2V50h50v150h50V50h50v150h50V0H480zM0 2e2h1e2V50h50v150h50V0H0V2e2z" stroke-width="5" stroke="currentcolor"/></svg>
</a><a class=social__link href=https://www.twitter.com/sergiocarracedo target=_blank title=Twitter style=animation-delay:1.6s><i class="fab fa-twitter"></i>
</a><a class=social__link href=http://www.last.fm/user/gasman40 target=_blank title=Last.fm style=animation-delay:1.5333333333333332s><i class="fab fa-lastfm"></i>
</a><a class=social__link href=http://sergiocarracedo.tumblr.com/ target=_blank title=Tumblr style=animation-delay:1.4666666666666668s><i class="fab fa-tumblr"></i></a></div></div></div></footer><script async src="https://www.googletagmanager.com/gtag/js?id=G-87X78TXEGE"></script><script>function runGA(){window.dataLayer=window.dataLayer||[];function e(){dataLayer.push(arguments)}e("js",new Date),e("config","G-87X78TXEGE")}</script><script>function runDisqus(){(function(){var e=document,t=e.createElement("script");t.src="https://sergiocarracedo.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()}</script><script src=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js></script><script>window.addEventListener("load",function(){window.cookieconsent.initialise({palette:{popup:{background:"#004262",text:"#fff"},button:{background:"#8ec760",text:"#ffffff"}},type:"opt-out",content:{message:"Este sitio usa cookies propias y de terceros para mejorar la experiencia de usuario y esas cosas.",allow:"Ok, continua",deny:"Nada de cookies",link:"Saber más",href:"https://sergiocarracedo.es/cookies"},onStatusChange:function(e){e=="allow"&&runCookiesAllowed()},onInitialise:function(e){e=="allow"&&runCookiesAllowed()}})})</script><script>addEventListener("scroll",e=>{let t=document.getElementsByTagName("body")[0];t&&window.scrollY>10?t.classList.add("not-in-top"):t.classList.remove("not-in-top")});function runCookiesAllowed(){runGA(),runDisqus()}</script><script integrity="sha256-hyPros3hoBf0jJM1+zayQLFFkchXwy4d/k2QMvk0sHs=" src=https://sergiocarracedo.es/js/theme.min.8723eba2cde1a017f48c9335fb36b240b14591c857c32e1dfe4d9032f934b07b.js></script><script src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js type=text/javascript></script><script integrity="sha256-9aiKKMxF0IhB2gmJbfgVOjk8GCtKW7zP2MwD74dPfDo=" src=https://sergiocarracedo.es/js/search.min.f5a88a28cc45d08841da09896df8153a393c182b4a5bbccfd8cc03ef874f7c3a.js></script></body></html>