
<!DOCTYPE html>
<html lang="en" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sergio Carracedo - Simplifying the use of custom a Vue v-model</title>

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="keywords" content="Sergio Carracedo,"> 
    <meta name="description" content="Sergio Carracedo personal Blog,One year ago I wrote a post about how to manage your custom v-model in your component (Spanish).
Th,"> 
    <meta name="author" content="Sergio Carracedo"> 
    <link rel="alternative" href="atom.xml" title="Sergio Carracedo" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    
<link rel="stylesheet" href="/css/sergiocarracedo.css">

    <meta name="description" content="One year ago I wrote a post about how to manage your custom v-model in your component (Spanish). The problem still being the same, if you try to mutate the value of the property into the component you">
<meta property="og:type" content="article">
<meta property="og:title" content="Simplifying the use of custom a Vue v-model">
<meta property="og:url" content="https://sergiocarracedo.es/vue-use-model-helpers/index.html">
<meta property="og:site_name" content="Sergio Carracedo">
<meta property="og:description" content="One year ago I wrote a post about how to manage your custom v-model in your component (Spanish). The problem still being the same, if you try to mutate the value of the property into the component you">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://sergiocarracedo.es/images/2021/use-model-josh-riemer-OH5BRdggi2w-unsplash.jpg">
<meta property="article:published_time" content="2021-05-10T00:00:00.000Z">
<meta property="article:modified_time" content="2021-11-21T16:59:31.122Z">
<meta property="article:author" content="Sergio Carracedo">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://sergiocarracedo.es/images/2021/use-model-josh-riemer-OH5BRdggi2w-unsplash.jpg">

    <script async src='https://www.google-analytics.com/analytics.js'></script>

    <script>
      function runGA() {
        window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
        ga('create', 'UA-133459072-1', 'auto');
        ga('send', 'pageview');
      }

      function runDisqus() {
        /*var disqus_config = function () {
          this.page.url = 'https://sergiocarracedo.es/';
          this.page.identifier = 'sergiocarracedo';
        }*/
        (function() { // DON'T EDIT BELOW THIS LINE
          var d = document, s = d.createElement('script');
          s.src = 'https://sergiocarracedo.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      }

      function runCookiesAllowed() {
        runGA();
        runDisqus();
      }
    </script>
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<meta name="generator" content="Hexo 5.4.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>

<body>
    <div id="single">
    <div id="top">
  <div class="bar" style="width: 0;"></div>
  <div class="container-fluid">
    <div class="grid-row">
      <div class="col-xs-12 col-sm-3">
        <a class="back-to-home" href="/">
          <img src="/img/sergiocarracedo.jpg" alt="Sergio Carracedo" class="image-logo"/>
          <h4>
            Sergio Carracedo
          </h4>
        </a>
      </div>
      <div class="hidden-xs hidden-lxs col-sm-6">
        <h3 class="subtitle">Simplifying the use of custom a Vue v-model</h3>
      </div>
    </div>
  </div>
  <div class="scrollbar"></div>
</div>

    <div class="section">
        <div class="article container-fluid-1200">
  <div class="grid-row">
    <div class="main col-xs-12">
      <h1 class="title">
        Simplifying the use of custom a Vue v-model
      </h1>
      <div class="stuff">
        <span>May 10, 2021</span>
      </div>

      
      <div class="article-image">
        <img src="/images/2021/header_use-model-josh-riemer-OH5BRdggi2w-unsplash.jpg" width="1200" height="400">
      </div>
      
      <div class="content markdown">
        <p>One year ago I wrote a post about how to manage your <a href="/2019/12/05/tu-propio-v-model-en-un-componente-vue/" title="custom v-model in your component">custom v-model in your component</a> (<em>Spanish</em>).</p>
<p>The problem still being the same, if you try to mutate the value of the property into the component you will get this error message:</p>
<blockquote>
<p>Error message: Avoid mutating a prop directly since the value will be overwritten whenever the parent component re-renders. Instead, use a data or computed property based on the prop’s value.</p>
</blockquote>
<p>That is normal, because the correct way of update a property value in the parent component is <strong>emit</strong> an event, for example: <code>emit('input', newValue)</code>.</p>
<p>I think the most convenient way to manage this situation is to create a local copy of the property in the component and observe its changes, and then emit the event, we also must observe property changes to keep the local copy updated if the parent component changes the property value.</p>
<p>This requires writting repetitive code for every single property (remember that in Vue 2.x we can use the <code>.sync</code> modifier to make other properties distinct of <code>value</code> 2-way bound)</p>
<p>To simplify my life (and yours) I created and published in <em>npmjs</em> a package that takes advantage of <strong>Vue composition API</strong> to make the code more reusable.</p>
<blockquote>
<p>The package is <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/vue-use-model-helpers">vue-use-model-helpers</a></p>
</blockquote>
<h3 id="IMPORTANT"><a href="#IMPORTANT" class="headerlink" title="IMPORTANT"></a>IMPORTANT</h3><p>The package works on both <strong>Vue 2.x</strong> and <strong>Vue 3</strong>, the way of using it is the same, but you must use the correct package version.</p>
<p>For Vue 2.x:</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm i vue-use-model-helper@2.x --save </span><br><span class="line"><span class="comment"># or </span></span><br><span class="line">yarn add vue-use-model-helper@2.x</span><br></pre></td></tr></tbody></table></figure>

<p>For Vue 3:</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm i vue-use-model-helper@3.x --save </span><br><span class="line"><span class="comment"># or </span></span><br><span class="line">yarn add vue-use-model-helper@3.x</span><br></pre></td></tr></tbody></table></figure>


<h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><p>This package encapsulates the logic of creating the local property’s copy, the watchers to observe the property and the local value, and the event dispatch.</p>
<p>In your components must import the <code>useLocalModel</code> helper function:</p>
<figure class="highlight ts"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { useLocalModel } <span class="keyword">from</span> <span class="string">'vue-use-model-helpers'</span></span><br></pre></td></tr></tbody></table></figure>

<p>Then you must pass an array with the names of the properties you want to manage because, yes, in Vue 2.x the helper can manage <code>.sync</code>. You don’t need to take care of the event name, the helper can recognize the property type and emits the correct event. </p>
<p>The helper returns a copy of every property with the name <code>local + [property name capitalized]</code> as a <code>ref</code>.</p>
<p>You can use destructuring to get the copies: <code>const { localValue, localUsername } = useLocalModel(['value', 'username'])</code></p>
<p>Putting all together:</p>
<figure class="highlight ts"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { useLocalModel } <span class="keyword">from</span> <span class="string">'vue-use-model-helpers'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> defineComponent({</span><br><span class="line">  ...</span><br><span class="line">  props: {</span><br><span class="line">    value: <span class="built_in">String</span>,</span><br><span class="line">    username: <span class="built_in">String</span></span><br><span class="line">  },</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params">props</span>)</span> {</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> { localValue, localUsername } = useLocalModel([<span class="string">'value'</span>, <span class="string">'username'</span>])</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      localValue, localUsername</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  ...</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<p>If, for example, you are using the <code>localValue</code> in an input in your component, every single time the user updates the input, the helper emits the event on behalf of you.</p>
<p>I think this helpers package simplifies the component readability and allow you to write less repetitive code.</p>
<p><a target="_blank" rel="noopener" href="https://github.com/sergiocarracedo/vue-use-model-helpers/issues">Any comments</a> to improve the package are highly welcome!</p>

      </div>
    </div>
  </div>
</div>

<div class="post-nav">
  <div class="container-fluid-1200">
    <div class="grid-row">
      <div class="next col-xs-6">
        
          <div class="nav-previous">
            <a href="https://sergiocarracedo.es//act-how-to-run-github-actions-in-local/" rel="prev" class="nav-cover">
              <img src="/images/2021/teaser_act-jake-givens-iR8m2RRo-z4-unsplash.jpg">
            </a>

            <a href="https://sergiocarracedo.es//act-how-to-run-github-actions-in-local/" rel="prev" class="nav-text">
              <i class="fa fa-arrow-left"></i> How to run GitHub Actions in local with Act
            </a>
          </div>
        
      </div>
      <div class="prev col-xs-6">
        
          <div class="nav-next">
            <a href="https://sergiocarracedo.es//tips-using-typescript-and-vue/" rel="next" class="nav-cover">
              <img src="/images/2021/teaser_vue-typescript-tips-rF4kuvgHhU-unsplash.jpg">
            </a>

            <a href="https://sergiocarracedo.es//tips-using-typescript-and-vue/" rel="next" class="nav-text">
              Tips using Typescript and Vue <i class="fa fa-arrow-right"></i>
            </a>
          </div>
        
      </div>
    </div>
  </div>
</div>

<div class="post-comments container-fluid-1200">
    <div id="disqus_thread">To show the comments is mandatory accept cookie policy.</div>
</div>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<div id="post-aboutme">
  <div class="me container-fluid">
    <div class="grid-row">
      <div class="col-xs-12 mb-5">
        <div class="social">
  <a href="http://www.linkedin.com/in/sergiocarracedo" class="social-link" target="_blank">
    <i class="fab fa-linkedin"></i>
  </a>
  <a href="mailto:hi+blog@sergiocarracedo.es" class="social-link" title="hi+blog@sergiocarracedo.es">
    <i class="fas fa-envelope"></i>
  </a>

  <a href="https://github.com/sergiocarracedo" class="social-link" target="_blank">
    <i class="fab fa-github"></i>
  </a>
  <a href="https://www.drupal.org/u/sergiocarracedo" class="social-link" target="_blank">
    <i class="fab fa-drupal"></i>
  </a>


  <a href="https://www.twitter.com/sergiocarracedo" class="social-link" target="_blank">
    <i class="fab fa-twitter"></i>
  </a>
  <a href="http://www.last.fm/user/gasman40" class="social-link" target="_blank">
    <i class="fab fa-lastfm"></i>
  </a>
  <a href="http://sergiocarracedo.tumblr.com/" class="social-link" target="_blank">
    <i class="fab fa-tumblr"></i>
  </a>
</div>

      </div>
    </div>
  </div>

  <div class="claim container-fluid-1440">
    <div class="grid-row">
      <div class="col-xs-12">
        <h3>Front-end and back-end developer.<br />#formula1, good conversations and small details lover.</h3>
      </div>
    </div>
  </div>

  <div class="container-fluid-1440">
    <div class="grid-row">
      <div class="col-xs-12">
        <a href="/" class="back">
          Home
        </a>
      </div>
    </div>
  </div>

</div>


    </div>


</div>

</body>
<script src="https://cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.bootcss.com/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>


<script src="/js/jquery.min.js"></script>
<script src="/js/sergiocarracedo.js"></script>


<link href="https://cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.css" rel="stylesheet">
<link href="https://cdn.bootcss.com/photoswipe/4.1.3/default-skin/default-skin.min.css" rel="stylesheet">

<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
    <script>
      window.addEventListener("load", function(){
        window.cookieconsent.initialise({
          "palette": {
            "popup": {
              "background": "#004262",
              "text": "#fff"
            },
            "button": {
              "background": "#8ec760",
              "text": "#ffffff"
            }
          },
          "type": "opt-out",
          "content": {
            "message": "Este sitio usa cookies propias y de terceros para mejorar la experiencia de usuario y esas cosas.",
            "allow": "Ok, continua",
            "deny": "Nada de cookies",
            "link": "Saber más",
            "href": "https://sergiocarracedo.es/cookies.html",
          },
          "onStatusChange": function(status, chosenBefore) {
            if (status == 'allow') {
               runCookiesAllowed()
            }
          },
          "onInitialise" : function(status) {
            if (status == 'allow') {
               runCookiesAllowed()
            }
          }
        })
      });
    </script>


</html>
