
<!DOCTYPE html>
<html lang="en" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sergio Carracedo - Deploying a static website in Azure Static Web Apps</title>

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="keywords" content="Sergio Carracedo,"> 
    <meta name="description" content="Sergio Carracedo personal Blog,Nowadays JAMStack is trendy because a lot of reasons: performance, security, decoupling, etc.
JAMSt,"> 
    <meta name="author" content="Sergio Carracedo"> 
    <link rel="alternative" href="atom.xml" title="Sergio Carracedo" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    
<link rel="stylesheet" href="/css/sergiocarracedo.css">

    <meta name="description" content="Nowadays JAMStack is trendy because a lot of reasons: performance, security, decoupling, etc. JAMStack consists of pre-rendering your website or application’s frontend and get the dynamic data from an">
<meta property="og:type" content="article">
<meta property="og:title" content="Deploying a static website in Azure Static Web Apps">
<meta property="og:url" content="https://sergiocarracedo.es/azure-static-web-apps/index.html">
<meta property="og:site_name" content="Sergio Carracedo">
<meta property="og:description" content="Nowadays JAMStack is trendy because a lot of reasons: performance, security, decoupling, etc. JAMStack consists of pre-rendering your website or application’s frontend and get the dynamic data from an">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://sergiocarracedo.es/images/2021/azureSWA.jpg">
<meta property="article:published_time" content="2021-01-20T00:00:00.000Z">
<meta property="article:modified_time" content="2021-08-09T12:47:58.854Z">
<meta property="article:author" content="Sergio Carracedo">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://sergiocarracedo.es/images/2021/azureSWA.jpg">

    <script async src='https://www.google-analytics.com/analytics.js'></script>

    <script>
      function runGA() {
        window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
        ga('create', 'UA-133459072-1', 'auto');
        ga('send', 'pageview');
      }

      function runDisqus() {
        /*var disqus_config = function () {
          this.page.url = 'https://sergiocarracedo.es/';
          this.page.identifier = 'sergiocarracedo';
        }*/
        (function() { // DON'T EDIT BELOW THIS LINE
          var d = document, s = d.createElement('script');
          s.src = 'https://sergiocarracedo.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      }

      function runCookiesAllowed() {
        runGA();
        runDisqus();
      }
    </script>
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
    <div id="single">
    <div id="top">
  <div class="bar" style="width: 0;"></div>
  <div class="container-fluid">
    <div class="grid-row">
      <div class="col-xs-12 col-sm-3">
        <a class="back-to-home" href="/">
          <img src="/img/sergiocarracedo.jpg" alt="Sergio Carracedo" class="image-logo"/>
          <h4>
            Sergio Carracedo
          </h4>
        </a>
      </div>
      <div class="hidden-xs col-sm-6">
        <h3 class="subtitle">Deploying a static website in Azure Static Web Apps</h3>
      </div>
    </div>
  </div>
  <div class="scrollbar"></div>
</div>

    <div class="section">
        <div class="article container-fluid-1200">
  <div class="grid-row">
    <div class="main col-xs-12">
      <h1 class="title">
        Deploying a static website in Azure Static Web Apps
      </h1>
      <div class="stuff">
        <span>January 20, 2021</span>
      </div>

      
      <div class="article-image">
        <img src="/images/2021/header_azureSWA.jpg" width="1200" height="400">
      </div>
      
      <div class="content markdown">
        <p>Nowadays <a target="_blank" rel="noopener" href="https://jamstack.org/">JAMStack</a> is trendy because a lot of reasons: performance, security, decoupling, etc.</p>
<p>JAMStack consists of pre-rendering your website or application’s frontend and get the dynamic data from an API.</p>
<p>Your pre-rendered markup can be host in a server, but as it is static, your host only needs to serve static files, just HTML, CSS, and JS. You don’t need to run any code on the server.</p>
<p>There are a lot of different options to deploy a static website, for example:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://pages.github.com/">Github Pages</a></li>
<li><a target="_blank" rel="noopener" href="https://www.netlify.com/">Netlify</a></li>
<li><a target="_blank" rel="noopener" href="https://vercel.com/">Vercel</a></li>
<li>etc.</li>
</ul>
<p>In this post I will talk about <a target="_blank" rel="noopener" href="https://azure.microsoft.com/en-us/services/app-service/static/">Azure Static Web Apps</a>, this is a service to host your static (and lambda functions)</p>
<p>At the moment of writing this post, it’s in a preview, and it’s free.</p>
<p>How to deploy your app, for example, a Vue app.</p>
<ol>
<li><p>Go to <a target="_blank" rel="noopener" href="https://portal.azure.com/">https://portal.azure.com/</a> and create a new account if you haven’t one yet.</p>
</li>
<li><p>Into the resource group click in <em>+ Create resource</em></p>
</li>
<li><p>Choose <strong>Static Web App (preview)</strong></p>
</li>
<li><p>You must select the subscription, the Resource group to assign this resource, the name of your app (to find it later in the Azure panel), the region where you want to serve the static files (choose one near your clients or users)</p>
</li>
<li><p>You need to link with your Github account and choose the repo (and the branch) to deploy.</p>
</li>
<li><p>Azure will create behalf you a Github Action to build your website and deploy it to SWA.</p>
</li>
</ol>
<p>Something like this</p>
<figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Azure</span> <span class="string">Static</span> <span class="string">Web</span> <span class="string">Apps</span> <span class="string">CI/CD</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span>  <span class="comment"># This action will run on push to main</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build_and_deploy_job:</span></span><br><span class="line">    <span class="attr">if:</span> <span class="string">github.event_name</span> <span class="string">==</span> <span class="string">'push'</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">Build</span> <span class="string">and</span> <span class="string">Deploy</span> <span class="string">Job</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">submodules:</span> <span class="literal">true</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Build</span> <span class="string">And</span> <span class="string">Deploy</span></span><br><span class="line">        <span class="attr">id:</span> <span class="string">builddeploy</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">Azure/static-web-apps-deploy@v0.0.1-preview</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">azure_static_web_apps_api_token:</span> <span class="string">${{</span> <span class="string">secrets.AZURE_STATIC_WEB_APPS_API_TOKEN</span> <span class="string">}}</span></span><br><span class="line">          <span class="attr">repo_token:</span> <span class="string">${{</span> <span class="string">secrets.GITHUB_TOKEN</span> <span class="string">}}</span> <span class="comment"># Used for Github integrations (i.e. PR comments)</span></span><br><span class="line">          <span class="attr">action:</span> <span class="string">"upload"</span></span><br><span class="line">          <span class="attr">app_location:</span> <span class="string">"/"</span> <span class="comment"># Path to your app in the web server</span></span><br><span class="line">          <span class="attr">api_location:</span> <span class="string">"api"</span> <span class="comment"># Api source code path - optional</span></span><br><span class="line">          <span class="attr">output_location:</span> <span class="string">"dist"</span>           </span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="attr">VUE_APP_MY_VARIABLE:</span> <span class="string">value</span></span><br><span class="line">          <span class="comment"># Environment variables needed to build your app</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>For more information about the actions you can read the official documentation: <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/static-web-apps/github-actions-workflow">https://docs.microsoft.com/en-us/azure/static-web-apps/github-actions-workflow</a></p>
<p>After doing this the Github action will run after every push to <code>master</code>, build the app, and deploy to azure.</p>
<blockquote>
<p>Azure provides you an url to access your website, like *.azurewebsites.net, you can also add your custom domain.</p>
</blockquote>
<h1 id="Configuring-routes"><a href="#Configuring-routes" class="headerlink" title="Configuring routes"></a>Configuring routes</h1><p>If you need to configure the routes, for example securing a route to allow only access to your company users, add a fallback route, or create a redirect you need to create a file named <code>routes.json</code> which is in the root directory after the build, in Vue you must store this in the <code>static</code> folder. </p>
<p>For example, this file forces users to must authenticated to access to any route and if the page requested is not found redirects to <code>200.html</code></p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">"routes"</span>: [</span><br><span class="line">    {</span><br><span class="line">      <span class="attr">"route"</span>: <span class="string">"/*"</span>,</span><br><span class="line">      <span class="attr">"allowedRoles"</span>: [<span class="string">"authenticated"</span>]</span><br><span class="line">    }</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"platformErrorOverrides"</span>: [</span><br><span class="line">    {</span><br><span class="line">      <span class="attr">"errorType"</span>: <span class="string">"NotFound"</span>,</span><br><span class="line">      <span class="attr">"serve"</span>: <span class="string">"/200.html"</span>,</span><br><span class="line">      <span class="attr">"statusCode"</span>: <span class="number">200</span></span><br><span class="line">    }</span><br><span class="line">  ]</span><br><span class="line">} </span><br></pre></td></tr></tbody></table></figure>
<p>Mor info about routes.json <a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/static-web-apps/routes">https://docs.microsoft.com/en-us/azure/static-web-apps/routes</a></p>
<p>I didn’t mention you can use <em>lambdas</em> to run server-side code (it is not free), but maybe I will write more about that in the future. </p>
<p>To summarizing, <strong>Azure Static Web Apps</strong> is another option to deploy static web apps, if you are using Azure in your company can be a good option to keep all the infrastructure services on the same platform, and it’s a simple alternative to deploy an App Service </p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      </div>
    </div>
  </div>
</div>

<div class="post-nav">
  <div class="container-fluid-1200">
    <div class="grid-row">
      <div class="next col-xs-6">
        
          <div class="nav-previous">
            <a href="https://sergiocarracedo.es//custom-svg-icon-set-management-with-vue/" rel="prev" class="nav-cover">
              <img src="/images/2021/teaser_svg-iconset.jpg">
            </a>

            <a href="https://sergiocarracedo.es//custom-svg-icon-set-management-with-vue/" rel="prev" class="nav-text">
              <i class="fa fa-arrow-left"></i> Custom SVG icon set management with Vue
            </a>
          </div>
        
      </div>
      <div class="prev col-xs-6">
        
          <div class="nav-next">
            <a href="https://sergiocarracedo.es/2020/2020-in-a-nutshell/" rel="next" class="nav-cover">
              <img src="/images/2020/nutshell/teaser_pexels-cottonbro-3401900.jpg">
            </a>

            <a href="https://sergiocarracedo.es/2020/2020-in-a-nutshell/" rel="next" class="nav-text">
              2020 in a nutshell <i class="fa fa-arrow-right"></i>
            </a>
          </div>
        
      </div>
    </div>
  </div>
</div>

<div class="post-comments container-fluid-1200">
    <div id="disqus_thread">To show the comments is mandatory accept cookie policy.</div>
</div>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<div id="post-aboutme">
  <div class="me container-fluid">
    <div class="grid-row">
      <div class="col-xs-12 mb-5">
        <div class="social">
  <a href="mailto:info@sergiocarracedo.es" class="social-link" title="info@sergiocarracedo.es">
    <i class="fas fa-envelope"></i>
  </a>
  <a href="https://github.com/sergiocarracedo" class="social-link" target="_blank">
    <i class="fab fa-github"></i>
  </a>
  <a href="https://www.drupal.org/u/sergiocarracedo" class="social-link" target="_blank">
    <i class="fab fa-drupal"></i>
  </a>

  <a href="http://www.linkedin.com/in/sergiocarracedo" class="social-link" target="_blank">
    <i class="fab fa-linkedin"></i>
  </a>
  <a href="https://www.twitter.com/sergiocarracedo" class="social-link" target="_blank">
    <i class="fab fa-twitter"></i>
  </a>
  <a href="http://www.last.fm/user/gasman40" class="social-link" target="_blank">
    <i class="fab fa-lastfm"></i>
  </a>
  <a href="http://sergiocarracedo.tumblr.com/" class="social-link" target="_blank">
    <i class="fab fa-tumblr"></i>
  </a>
</div>

      </div>
    </div>
  </div>

  <div class="claim container-fluid-1440">
    <div class="grid-row">
      <div class="col-xs-12">
        <h3>Front-end and back-end developer.<br />#formula1, good conversations and small details lover.</h3>
      </div>
    </div>
  </div>

  <div class="container-fluid-1440">
    <div class="grid-row">
      <div class="col-xs-12">
        <a href="/" class="back">
          Home
        </a>
      </div>
    </div>
  </div>

</div>


    </div>


</div>

</body>
<script src="https://cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.bootcss.com/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>


<script src="/js/jquery.min.js"></script>
<script src="/js/sergiocarracedo.js"></script>


<link href="https://cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.css" rel="stylesheet">
<link href="https://cdn.bootcss.com/photoswipe/4.1.3/default-skin/default-skin.min.css" rel="stylesheet">

<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
    <script>
      window.addEventListener("load", function(){
        window.cookieconsent.initialise({
          "palette": {
            "popup": {
              "background": "#004262",
              "text": "#fff"
            },
            "button": {
              "background": "#8ec760",
              "text": "#ffffff"
            }
          },
          "type": "opt-out",
          "content": {
            "message": "Este sitio usa cookies propias y de terceros para mejorar la experiencia de usuario y esas cosas.",
            "allow": "Ok, continua",
            "deny": "Nada de cookies",
            "link": "Saber más",
            "href": "https://sergiocarracedo.es/cookies.html",
          },
          "onStatusChange": function(status, chosenBefore) {
            if (status == 'allow') {
               runCookiesAllowed()
            }
          },
          "onInitialise" : function(status) {
            if (status == 'allow') {
               runCookiesAllowed()
            }
          }
        })
      });
    </script>


</html>
