<!doctype html><html><head><meta charset=utf-8><meta content="IE=edge,chrome=1" http-equiv=x-ua-compatible><meta content="width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no" name=viewport><title>Sergio Carracedo | Automate the startup of your projects with yarn create and SAOjs</title><meta content="yes" name=apple-mobile-web-app-capable><meta content="black-translucent" name=apple-mobile-web-app-status-bar-style><meta content="Sergio Carracedo's personal page and blog" name=description><meta content="Sergio Carracedo" name=author><link href=favicon.png rel=icon><meta property="og:title" content="Automate the startup of your projects with yarn create and SAOjs"><meta property="og:description" content="Start a project in any language, framework, etc it&rsquo;s not as simple as it seems. I mean, usually, the project requires a lot of configuration files, installing dependencies, set the environment, create skeleton files, etc.
Talking about JavaScript frameworks: everyone has his own CLI tool to start a project with the required files to start to code.
For example Angular has @angular/cli and you could execute ng new [app-name]or Vue has @vue/cli and you can start a Vue project executing vue create [project name]."><meta property="og:type" content="article"><meta property="og:url" content="/automate-project-startup-with-yarn-create/"><meta property="og:image" content="/automate-project-startup-with-yarn-create/automatize-node-project-creation_hue3e183c5fa902cd4ae789f3e908b1fee_277353_1920x1080_fill_q75_box_center.jpg"><meta property="article:section" content="blog"><meta property="article:published_time" content="2020-09-22T00:00:00+00:00"><meta property="article:modified_time" content="2020-09-22T00:00:00+00:00"><link href=/scss/main.1fb71fa7ebb2d9065c28cbf3dd7ed45114596cf9b9be107e9d0ded933e45f4e1.css integrity="sha256-H7cfp+uy2QZcKMvz3X7UURRZbPm5vhB+nQ3tkz5F9OE=" rel=stylesheet><link href=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css rel=stylesheet type=text/css></head><body><header class=web-header><h2><a class=back-to-home href=/ title="Back to home"><i class="fas fa-home"></i><div class=back-to-home__content><span class=back-to-home__action>Back to home</span><div class=back-to-home__title><img alt="Sergio Carracedo" class=avatar src=/i/sergiocarracedo_hu73b47473f776de3df6b6aad72862b165_186188_100x100_fit_q75_box.jpg><h4>Sergio Carracedo</h4></div></div></a></h2><div class=web-header__page-title>Automate the startup of your projects with yarn create and SAOjs</div></header><div class=main-content><article class="post post--single"><div class="post__main wrapper-1200"><aside class=post__metadata><time class=post__date datetime=2020-09-22><i class="far fa-calendar-alt"></i> Sep 22, 2020</time><div class=post__tags></div><span class=post__reading-time><i class="far fa-clock"></i> 4 minutes read</span></aside><header class=post__header><h1 class=post__title>Automate the startup of your projects with yarn create and SAOjs</h1></header><figure class=post__cover><img src=/automate-project-startup-with-yarn-create/automatize-node-project-creation_hue3e183c5fa902cd4ae789f3e908b1fee_277353_1200x400_fill_q75_box_center.jpg alt="Automate the startup of your projects with yarn create and SAOjs" width=1200 height=400></figure><div class=post__content><p>Start a project in any language, framework, etc it&rsquo;s not as simple as it seems. I mean, usually, the project requires a lot of configuration files, installing dependencies, set the environment, create skeleton files, etc.</p><p>Talking about JavaScript frameworks: everyone has his own CLI tool to start a project with the required files to start to code.</p><p>For example <strong>Angular</strong> has <a href=https://cli.angular.io/>@angular/cli</a> and you could execute <code>ng new [app-name]</code>or
<strong>Vue</strong> has <a href=https://cli.vuejs.org/>@vue/cli</a> and you can start a Vue project executing <code>vue create [project name]</code>.</p><p>This is nice, but usually, the default config is not complaining your development&rsquo;s requisites you still must editing the config files to set up the project according to your needs, for example, change <code>tsconfig.json</code> configuration, more <em>advanced</em>, you would like to add some code in router file or you would like to create a folder structure for the store, or anything.</p><p>Do all those tasks every time you start a project is boring and spend time.</p><p>In the background, these CLI tools are using a skeleton repo or similar to prepare your project, but thinking in a generic use case.</p><p>So we can do the same but adapting this use case to our use case.</p><h2 id=yarn-create-or-npx-create><code>yarn create</code> (or <code>npx create</code>)</h2><p><a href=https://yarnpkg.com/>Yarn</a> is a node package manager with vitamins, and provides the command <code>create</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ yarn create <span style=color:#f92672>[</span>my-starter-kit<span style=color:#f92672>]</span>
</span></span></code></pre></div><p>You only need to have installed <code>yarn</code>, nothing else. This command gets from your <em>npm registry</em> a package named <code>create-</code> + the name you use in the command, in our example tries to get the package <code>create-my-starter-kit</code></p><p>Then, yarn reads the <code>package.json</code> file of the package, installs the dependencies, and run the command in the <code>bin</code> entry</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#75715e>// package.json
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;create-my-starter-kit&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;version&#34;</span>: <span style=color:#e6db74>&#34;1.0.0&#34;</span>,  
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;bin&#34;</span>: <span style=color:#e6db74>&#34;lib/cli.js&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>...</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong><code>yarn create</code> won&rsquo;t do anything else</strong></p><p>You must create the next steps, but, think about it, the user (you, a teammate, a user of an open-source project) only need yarn as a dependency.</p><p>In your <code>cli.js</code> you can do things to prepare the development environment by yourself. But, let&rsquo;s see how to simplify all these tasks.</p><h2 id=saojs>SAOjs</h2><p><a href=https://saojs.org/>SAO</a> describes itself as a <em>Futuristic scaffolding tool</em>. and it&rsquo;s inspired in <a href=https://yeoman.io/>Yeoman</a></p><p>These tools allow you to ask the user who runs your <em>create-app</em> questions that you could use to make decisions to install or configure different elements.</p><p>You must create the file <code>saofile.js</code>, and this file must export this elements:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>templateData</span><span style=color:#f92672>:</span> ...,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>prompts</span><span style=color:#f92672>:</span> ...,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>actions</span><span style=color:#f92672>:</span> ...,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>prepare</span><span style=color:#f92672>:</span> ...,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>subGenerators</span><span style=color:#f92672>:</span> ...,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>completed</span><span style=color:#f92672>:</span> ...
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=prompts>Prompts</h2><p>Let&rsquo;s talk about <code>prompts</code>. That must return an array of questions to want to do to the user, for example</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>  <span style=color:#a6e22e>prompts</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;input&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;projectName&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;What is your project name?&#39;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;list&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;packageManager&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;Your favourite package manager&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>choices</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;yarn&#39;</span>, <span style=color:#e6db74>&#39;npm&#39;</span>]
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ]
</span></span></code></pre></div><p>When you run SAO (we&rsquo;ll see how to do soon), it&rsquo;ll ask the user the questions.</p><p>The &ldquo;prompts&rdquo; system is very useful, you can ask questions only if a previous question is has some value, etc.</p><p>You can also save some answers as preset for the next projects (Like Vue CLI does)</p><p><a href=https://v1.saojs.org/saofile.html#prompts>More information about prompts</a></p><h2 id=actions>Actions</h2><p>The other important key in the saofile&rsquo;s object is the actions. They define the actions to do. The important thing is that the actions can be conditioned by the user answers.</p><h3 id=add>Add</h3><p>You can copy files from a <code>templateDir</code> (in your create package) to the target (the project to create). That&rsquo;s that we needed ;)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;add&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>files</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;**&#39;</span>, 
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>templateDir</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/template&#39;</span>,
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>You could even filter the files to add depending on the user&rsquo;s answers
<a href=https://v1.saojs.org/saofile.html#type-add>More info</a></p><h3 id=move>Move</h3><p>Moves files in the target (the project to create)</p><h3 id=modify>Modify</h3><p>Modify files in the target (the project to create), that is very interesting too, for example, for updating config files according to what the user answered</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>packageName</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>packageName</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;modify&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>files</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;package.json&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>handler</span><span style=color:#f92672>:</span> (<span style=color:#a6e22e>data</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>packageName</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>data</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>In the example, we changed the project name in the <code>package.json</code> according to the user&rsquo;s previous answers.</p><h3 id=delete>Delete</h3><p>Delete files in the target.</p><h2 id=running-sao>Running SAO</h2><p>You can run SAO from command line or from your <code>cli.js</code> file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>sao</span>({...<span style=color:#a6e22e>customVariables</span>})
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>run</span>()
</span></span><span style=display:flex><span>  .<span style=color:#66d9ef>catch</span>((<span style=color:#a6e22e>err</span>) =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>trace</span>(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>exit</span>(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>  })
</span></span></code></pre></div><h2 id=summary>Summary</h2><p>Probably you worked before with something similar, every time you have been created a project with Vue CLI, Nuxt, React, etc.</p><p>That is a shallow introduction to all the SAO functionalities, but as you can see the possibilities to customize your project creation are high.</p><p>You could create a template with the config files you use habitually and store the creation script in NPM.js, in a private registry, and every time you create a project, invoke <code>yarn create my-project-scaffolding</code> and start to code without the need of prepare manually the config files or miss some dependency.</p></div></div><aside class=post__nav-wrapper><div class=wrapper-1200><div class="post-nav post-nav--prev"><a class=post-nav__link href="/blog/2020/creating-your-own-vue-ui-components-library-from-scratch-to-npm/?ref=footer"><div class=post-nav__cover><img alt=.NextPage.Title src=/blog/2020/creating-your-own-vue-ui-components-library-from-scratch-to-npm/vue-components-talk_hu2fdff563a4fda6043dbb948f1f20cd67_219025_200x120_fill_q75_box_center.jpg></div><div class=post-nav__title>Talk: Creating your own Vue UI components library:...</div></a></div><div class=blog-link><a class=btn href=blog>All Blog posts</a></div><div class="post-nav post-nav--next"><a class=post-nav__link href="/how-vue-reactivity-works-i/?ref=footer"><div class=post-nav__cover><img alt=.PrevPage.Title class=post-nav__cover src=/how-vue-reactivity-works-i/object-define-property-pb-2361801_hu3651eb3737df1c0b2d430c86b97b1b98_541973_200x120_fill_q75_box_center.jpg></div><div class=post-nav__title>How Vue's reactivity works (I):...</div></a></div></div></aside><aside class=post__comments><div class=wrapper-1200><div id=disqus_thread>To show the comments is mandatory accept cookie policy.</div></div></aside></article></div><footer class=web-footer><div class=wrapper-1200><div class=web-footer__left><div class=me><div class=me__avatar><img alt="Sergio Carracedo" src=/i/sergiocarracedo_hu73b47473f776de3df6b6aad72862b165_186188_170x170_fit_q75_box.jpg></div><div class=me__titles><h1>Sergio Carracedo</h1><h2>Senior Fullstack developer.</h2><h3>Formula 1, cats, good conversations and small details lover.</h3></div></div></div><div class=web-footer__right><nav role=main class=menu><ul><li class=menu__item><a href>Home</a></li><li class=menu__item><a href=blog>Blog</a></li></ul></nav><div class=social><a class=social__link href=http://www.linkedin.com/in/sergiocarracedo target=_blank title=LinkedIn style=animation-delay:2s><i class="fab fa-linkedin"></i></a>
<a class=social__link href=mailto:hi+blog@sergiocarracedo.es target=_blank title=Email style=animation-delay:1.9333333333333333s><i class="fas fa-envelope"></i></a>
<a class=social__link href=https://github.com/sergiocarracedo target=_blank title=GitHub style=animation-delay:1.8666666666666667s><i class="fab fa-github"></i></a>
<a class=social__link href=https://www.drupal.org/u/sergiocarracedo target=_blank title=Drupal style=animation-delay:1.8s><i class="fab fa-drupal"></i></a>
<a class=social__link href=https://www.twitter.com/sergiocarracedo target=_blank title=Twitter style=animation-delay:1.7333333333333334s><i class="fab fa-twitter"></i></a>
<a class=social__link href=http://www.last.fm/user/gasman40 target=_blank title=Last.fm style=animation-delay:1.6666666666666667s><i class="fab fa-lastfm"></i></a>
<a class=social__link href=http://sergiocarracedo.tumblr.com/ target=_blank title=Tumblr style=animation-delay:1.6s><i class="fab fa-tumblr"></i></a></div></div></div></footer><script async src="https://www.googletagmanager.com/gtag/js?id=UA-133459072-1"></script>
<script>function runGA(){function e(){dataLayer.push(arguments)}e("js",new Date),e("config","UA-133459072-1")}</script><script>function runDisqus(){(function(){var e=document,t=e.createElement("script");t.src="https://sergiocarracedo.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()}</script><script src=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js></script>
<script>window.addEventListener("load",function(){window.cookieconsent.initialise({palette:{popup:{background:"#004262",text:"#fff"},button:{background:"#8ec760",text:"#ffffff"}},type:"opt-out",content:{message:"Este sitio usa cookies propias y de terceros para mejorar la experiencia de usuario y esas cosas.",allow:"Ok, continua",deny:"Nada de cookies",link:"Saber más",href:"cookies"},onStatusChange:function(e){e=="allow"&&runCookiesAllowed()},onInitialise:function(e){e=="allow"&&runCookiesAllowed()}})})</script><script>addEventListener("scroll",e=>{let t=document.getElementsByTagName("body")[0];t&&window.scrollY>10?t.classList.add("not-in-top"):t.classList.remove("not-in-top")});function runCookiesAllowed(){runGA(),runDisqus()}</script></body></html>